
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Aviatrix Cloud Firewall Lab &#8212; ACE Security</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=1d85937c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/egress';</script>
    <link rel="icon" href="../_static/aviatrix-favicon-32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quiz and Survey" href="quiz.html" />
    <link rel="prev" title="ACE Security Specialty" href="home.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="home.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/Aviatrix_Logo_White_Gradient_RGB.svg" class="logo__image only-light" alt="ACE Security - Home"/>
    <script>document.write(`<img src="../_static/Aviatrix_Logo_White_Gradient_RGB.svg" class="logo__image only-dark" alt="ACE Security - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="home.html">
                    ACE Security Specialty
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Aviatrix Cloud Firewall Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="quiz.html">Quiz and Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="quiz-hints.html">Quiz - Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="PDFs.html">PDFs</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/egress.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Aviatrix Cloud Firewall Lab</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">1. Scenario</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expensive-and-limited-csp-native-nat-gateway">2. Expensive and Limited CSP Native NAT Gateway</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-charges-reference">2.1 Data Charges Reference</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#damaged-reputation-and-employee-fired">3. Damaged Reputation and Employee Fired</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#you-are-the-newly-hired-cloud-networking-architect">3.1 You are the Newly Hired Cloud Networking Architect</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-objective">4. LAB Objective</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listen-to-the-following-recording">4.1 Listen to the following recording</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-access-details">LAB Access Details</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-credentials">Access credentials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-pre-req">5. LAB Pre-Req</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#successful-completion-of-lab">5.1 Successful Completion of LAB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-hints">6. Lab Hints</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-secure-egress-dcf-rules">6.1 Create Secure Egress DCF Rules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-rfc1918-smartgroup">6.2 Create rfc1918 SmartGroup</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-webgroup-to-define-fqdn-allowed-to-access-internet">6.3 Create WebGroup to Define FQDN Allowed to Access Internet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploy-aviatrix-spoke-gw">6.4 Deploy Aviatrix Spoke GW</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-spoke-gw-to-become-the-egress-gw">6.5 Enable spoke GW to become the Egress GW</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">7. Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="aviatrix-cloud-firewall-lab">
<h1>Aviatrix Cloud Firewall Lab<a class="headerlink" href="#aviatrix-cloud-firewall-lab" title="Link to this heading">#</a></h1>
<section id="scenario">
<h2>1. Scenario<a class="headerlink" href="#scenario" title="Link to this heading">#</a></h2>
<p>ABC Healthcare (a fictitious company), a leading healthcare provider, operates exclusively within the AWS cloud environment. For internet egress traffic, they utilize AWS NAT Gateway. While the NAT Gateway effectively handles IP address translation, it is not intended to serve as a comprehensive security solution. This limited security capability has raised concerns among ABC Healthcare’s management regarding data privacy and HIPAA compliance.</p>
</section>
<section id="expensive-and-limited-csp-native-nat-gateway">
<h2>2. Expensive and Limited CSP Native NAT Gateway<a class="headerlink" href="#expensive-and-limited-csp-native-nat-gateway" title="Link to this heading">#</a></h2>
<p>The current AWS NAT Gateway doesn’t provide the necessary visibility and logging capabilities, and it’s also very expensive due to 2 cents per GB egress data processing charges. ABC Healthcare’s average monthly egress traffic is around 500 TB.
The native solution also lacks visibility, is cost-prohibitive, and doesn’t support zero trust architecture—putting sensitive patient data and the healthcare provider’s reputation at risk.</p>
<section id="data-charges-reference">
<h3>2.1 Data Charges Reference<a class="headerlink" href="#data-charges-reference" title="Link to this heading">#</a></h3>
<p><a href="https://aws.amazon.com/blogs/networking-and-content-delivery/identify-and-optimize-public-ipv4-address-usage-on-aws" target="_blank">Networking and content delivery</a></p>
<p><a href="https://aws.amazon.com/blogs/apn/aws-data-transfer-charges-for-server-and-serverless-architectures" target="_blank">Data transfer</a></p>
<p><a href="https://www.cloudzero.com/blog/aws-egress-costs/#:~:text=Data%20transfers%20out%20of%20AWS,$0.0900%20and%20$0.0500%20per%20GB" target="_blank">Egress cost</a></p>
</section>
</section>
<section id="damaged-reputation-and-employee-fired">
<h2>3. Damaged Reputation and Employee Fired<a class="headerlink" href="#damaged-reputation-and-employee-fired" title="Link to this heading">#</a></h2>
<p>To further complicate matters, ABC Healthcare recently suffered a data exfiltration attack, which led to significant disruptions, reputational damage, and a negative impact on its stock value. This incident resulted in the dismissal of the previous cloud network architects.</p>
<section id="you-are-the-newly-hired-cloud-networking-architect">
<h3>3.1 You are the Newly Hired Cloud Networking Architect<a class="headerlink" href="#you-are-the-newly-hired-cloud-networking-architect" title="Link to this heading">#</a></h3>
<p>You, the newly appointed architect, have been tasked with securing this traffic using the Aviatrix Secure Egress solution. Your mission is to implement a solution that enhances visibility, provides detailed logging, and complies with regulatory mandates while being cost-effective and efficient.</p>
</section>
</section>
<section id="lab-objective">
<h2>4. LAB Objective<a class="headerlink" href="#lab-objective" title="Link to this heading">#</a></h2>
<p>It is your job to do a POC/POV in your lab and demonstrate how your company can leverage Aviatrix Cloud Perimeter Solution to solve this pain point. You need to deploy the Aviatrix Secure Egress solution using Aviatrix Spoke Gateway to protect internet-bound traffic more effectively than the AWS NAT Gateway.
The Zero Trust policy should only allow the following domains and block all other FQDNs.
The lab intentionally only provides some of the steps for you to complete this lab. You should leverage <a href="https://docs.aviatrix.com" target="_blank">docs.aviatrix.com</a> if you are stuck.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">allowed-internet-http</span></code> domains</p>
<ul>
<li><p>*.ubuntu.com</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed-internet-https</span></code> domains</p>
<ul>
<li><p>*.alibabacloud.com</p></li>
<li><p><a class="reference external" href="http://azure.microsoft.com">azure.microsoft.com</a></p></li>
<li><p><a class="reference external" href="http://aws.amazon.com">aws.amazon.com</a></p></li>
<li><p>*.amazonaws.com</p></li>
<li><p>*.aviatrix.com</p></li>
<li><p><a class="reference external" href="http://aviatrix.com">aviatrix.com</a></p></li>
<li><p><a class="reference external" href="http://cloud.google.com">cloud.google.com</a></p></li>
<li><p>*.docker.com</p></li>
<li><p>*.docker.io</p></li>
<li><p><a class="reference external" href="http://www.oracle.com">www.oracle.com</a></p></li>
</ul>
</li>
</ul>
<section id="listen-to-the-following-recording">
<h3>4.1 Listen to the following recording<a class="headerlink" href="#listen-to-the-following-recording" title="Link to this heading">#</a></h3>
<p>Listen carefully. There will be quiz questions based on this 4 min video, also.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cNx51ZJhxek?si=V83b5ledWF08f1lx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</section>
</section>
<section id="lab-access-details">
<h2>LAB Access Details<a class="headerlink" href="#lab-access-details" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>POD#</strong></p></th>
<th class="head text-center"><p><strong>Copilot</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>32</p></td>
<td class="text-center"><p><a href="https://cplt.pod32.aviatrixlab.com" target="_blank">POD32</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>33</p></td>
<td class="text-center"><p><a href="https://cplt.pod33.aviatrixlab.com" target="_blank">POD33</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>34</p></td>
<td class="text-center"><p><a href="https://cplt.pod34.aviatrixlab.com" target="_blank">POD34</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>35</p></td>
<td class="text-center"><p><a href="https://cplt.pod35.aviatrixlab.com" target="_blank">POD35</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>36</p></td>
<td class="text-center"><p><a href="https://cplt.pod36.aviatrixlab.com" target="_blank">POD36</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>37</p></td>
<td class="text-center"><p><a href="https://cplt.pod37.aviatrixlab.com" target="_blank">POD37</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>38</p></td>
<td class="text-center"><p><a href="https://cplt.pod38.aviatrixlab.com" target="_blank">POD38</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>39</p></td>
<td class="text-center"><p><a href="https://cplt.pod39.aviatrixlab.com" target="_blank">POD39</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>40</p></td>
<td class="text-center"><p><a href="https://cplt.pod40.aviatrixlab.com" target="_blank">POD40</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>41</p></td>
<td class="text-center"><p><a href="https://cplt.pod41.aviatrixlab.com" target="_blank">POD41</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>42</p></td>
<td class="text-center"><p><a href="https://cplt.pod42.aviatrixlab.com" target="_blank">POD42</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>43</p></td>
<td class="text-center"><p><a href="https://cplt.pod43.aviatrixlab.com" target="_blank">POD43</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>44</p></td>
<td class="text-center"><p><a href="https://cplt.pod44.aviatrixlab.com" target="_blank">POD44</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>45</p></td>
<td class="text-center"><p><a href="https://cplt.pod45.aviatrixlab.com" target="_blank">POD45</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>46</p></td>
<td class="text-center"><p><a href="https://cplt.pod46.aviatrixlab.com" target="_blank">POD46</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>47</p></td>
<td class="text-center"><p><a href="https://cplt.pod47.aviatrixlab.com" target="_blank">POD47</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>48</p></td>
<td class="text-center"><p><a href="https://cplt.pod48.aviatrixlab.com" target="_blank">POD48</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="access-credentials">
<h2>Access credentials<a class="headerlink" href="#access-credentials" title="Link to this heading">#</a></h2>
<p>Username:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>student
</pre></div>
</div>
<p>Password:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">127</span><span class="c1">#rdpn8K4GBJ</span>
</pre></div>
</div>
</section>
<section id="lab-pre-req">
<h2>5. LAB Pre-Req<a class="headerlink" href="#lab-pre-req" title="Link to this heading">#</a></h2>
<p>Before starting the lab, change the following timers to their lowest value</p>
<p><img alt="Task Server" src="../_images/egress_timers.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>DO NOT ATTEMPT TO CHANGE THESE TIMES IN PRE-PROD or PROD SETUP. THIS WOULD CAUSE SERIOUS ISSUES.</p>
</div>
<p>It should look like the following:</p>
<p><img alt="Task Server" src="../_images/egress_timers_updated.png" /></p>
<p>Do not change these times in the production setup</p>
<ul class="simple">
<li><p>Aviatrix Spoke GW must be deployed in Region us-east-1 in the “egress-vpc”</p></li>
<li><p>GW Instance Size should be t3a.small</p></li>
</ul>
<section id="successful-completion-of-lab">
<h3>5.1 Successful Completion of LAB<a class="headerlink" href="#successful-completion-of-lab" title="Link to this heading">#</a></h3>
<p>After completing the lab, your screen should look more or less like the following. The IP addresses and UUIDs could be different.</p>
<p><img alt="Topology" src="../_images/egress_topology.png" /></p>
<p><img alt="Gateway" src="../_images/egress_spoke.png" /></p>
<p><img alt="Monitor" src="../_images/egress_monitor.png" /></p>
<p><img alt="Filter" src="../_images/egress_monitor_filter.png" /></p>
<p><img alt="Routes" src="../_images/egress_vpc_routes.png" /></p>
</section>
</section>
<section id="lab-hints">
<h2>6. Lab Hints<a class="headerlink" href="#lab-hints" title="Link to this heading">#</a></h2>
<section id="create-secure-egress-dcf-rules">
<h3>6.1 Create Secure Egress DCF Rules<a class="headerlink" href="#create-secure-egress-dcf-rules" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Create three rules</p></li>
<li><p>The last DCF rule is a zero-trust rule</p></li>
<li><p>Rule 100 is to allow traffic from the test instance on the private IP address to the public internet only to FQDNs specified in the <code class="docutils literal notranslate"><span class="pre">allowed-internet-https</span></code> web group</p></li>
<li><p>Rule 0 is to allow traffic from the test instance on the private IP address to the public internet only to FQDNs specified in the <code class="docutils literal notranslate"><span class="pre">allowed-internet-http</span></code> web group</p></li>
</ul>
<p><img alt="DCF" src="../_images/egress_dcf_rules.png" /></p>
</section>
<section id="create-rfc1918-smartgroup">
<h3>6.2 Create rfc1918 SmartGroup<a class="headerlink" href="#create-rfc1918-smartgroup" title="Link to this heading">#</a></h3>
<p><img alt="Group" src="../_images/egress_groups.png" /></p>
<p><img alt="rfc1918" src="../_images/egress_rfc1918.png" /></p>
</section>
<section id="create-webgroup-to-define-fqdn-allowed-to-access-internet">
<h3>6.3 Create WebGroup to Define FQDN Allowed to Access Internet<a class="headerlink" href="#create-webgroup-to-define-fqdn-allowed-to-access-internet" title="Link to this heading">#</a></h3>
<p><img alt="WebGroup" src="../_images/egress_create_group.png" /></p>
<p><img alt="Edit Group" src="../_images/egress_edit_group.png" /></p>
<p><img alt="Polling" src="../_images/egress_polling.png" /></p>
</section>
<section id="deploy-aviatrix-spoke-gw">
<h3>6.4 Deploy Aviatrix Spoke GW<a class="headerlink" href="#deploy-aviatrix-spoke-gw" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The public IP address will be different (Public EIP automatically allocated by CSP)</p></li>
<li><p>The Subnet CIDR could be different (automatically picked up by Aviatrix Controller)</p></li>
<li><p>Region: us-east-1</p></li>
</ul>
<p><img alt="Spoke" src="../_images/egress_spoke_gw.png" /></p>
<p>Check the Egress setting. The Egress traffic is going through the AWS NAT GW.</p>
<p><img alt="Egress" src="../_images/egress_egress.png" /></p>
</section>
<section id="enable-spoke-gw-to-become-the-egress-gw">
<h3>6.5 Enable spoke GW to become the Egress GW<a class="headerlink" href="#enable-spoke-gw-to-become-the-egress-gw" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Click +Local Egress on VPC/VNets.</p></li>
<li><p>In the Add Local Egress on VPC/VNets dialog, select the VPC/VNets on which to enable Local Egress.</p></li>
<li><p>Click Add.</p></li>
</ol>
<p><a class="reference external" href="https://docs.aviatrix.com/copilot/latest/network-security/index.html">Read more at Aviatrix Documentation</a></p>
<p><img alt="Local" src="../_images/egress_add_local.png" /></p>
<p>Add Local Egress on VPC/VNets
Adding Egress Control on VPC/VNet changes the default route on VPC/VNet to point to the Spoke Gateway and enables SNAT. Egress Control also requires additional resources on the Spoke Gateway.VPC/VNets</p>
<p>Now the diagram should look like the following:</p>
<p><img alt="Vpc" src="../_images/egress_vpc.png" /></p>
</section>
</section>
<section id="conclusion">
<h2>7. Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>Certainly! Here’s a refined and polished version of your paragraph:</p>
<p>By implementing Aviatrix Secure Egress, our healthcare provider strengthened their security posture, reduced costs, and eliminated the visibility gaps associated with AWS NAT Gateway. Patient data remains protected, and the provider’s reputation is safeguarded.
Remember, Aviatrix Secure Egress is your trusted solution for secure and cost-effective management of internet-bound traffic. Need assistance? Our support team is here to help.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="home.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ACE Security Specialty</p>
      </div>
    </a>
    <a class="right-next"
       href="quiz.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Quiz and Survey</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">1. Scenario</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expensive-and-limited-csp-native-nat-gateway">2. Expensive and Limited CSP Native NAT Gateway</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-charges-reference">2.1 Data Charges Reference</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#damaged-reputation-and-employee-fired">3. Damaged Reputation and Employee Fired</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#you-are-the-newly-hired-cloud-networking-architect">3.1 You are the Newly Hired Cloud Networking Architect</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-objective">4. LAB Objective</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listen-to-the-following-recording">4.1 Listen to the following recording</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-access-details">LAB Access Details</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-credentials">Access credentials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-pre-req">5. LAB Pre-Req</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#successful-completion-of-lab">5.1 Successful Completion of LAB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-hints">6. Lab Hints</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-secure-egress-dcf-rules">6.1 Create Secure Egress DCF Rules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-rfc1918-smartgroup">6.2 Create rfc1918 SmartGroup</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-webgroup-to-define-fqdn-allowed-to-access-internet">6.3 Create WebGroup to Define FQDN Allowed to Access Internet</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploy-aviatrix-spoke-gw">6.4 Deploy Aviatrix Spoke GW</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-spoke-gw-to-become-the-egress-gw">6.5 Enable spoke GW to become the Egress GW</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">7. Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aviatrix
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>