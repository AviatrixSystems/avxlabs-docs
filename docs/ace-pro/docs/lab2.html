
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lab 2 - TRANSIT NETWORKING &#8212; ACE Operations Lab</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=1d85937c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/lab2';</script>
    <link rel="icon" href="../_static/aviatrix-favicon-32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 3 - NETWORK SEGMENTATION" href="lab3.html" />
    <link rel="prev" title="Lab 1 - VPCs/VNets CREATION" href="lab1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="home.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/Aviatrix_Logo_White_Gradient_RGB.svg" class="logo__image only-light" alt="ACE Operations Lab - Home"/>
    <script>document.write(`<img src="../_static/Aviatrix_Logo_White_Gradient_RGB.svg" class="logo__image only-dark" alt="ACE Operations Lab - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="home.html">
                    Welcome to ACE Professional Lab
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pod.html">POD Portal</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1.html">Lab 1 - VPCs/VNets CREATION</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lab 2 - TRANSIT NETWORKING</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">Lab 3 - NETWORK SEGMENTATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">Lab 4 - HPE WITH ACTIVE MESH</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab5.html">Lab 5 - AVIATRIX CLOUD FIREWALL</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab6.html">Lab 6 - FIRENET</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab7.html">Lab 7 - SITE2CLOUD</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab8.html">Lab 8 - SECURE HIGH-PERFORMANCE DATACENTER EDGE</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab9.html">Lab 9 - THREAT PREVENTION</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab10.html">Lab 10 - COSTIQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab11.html">Lab 11 - DISTRIBUTED CLOUD FIREWALL</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab12.html">Lab 12 - IAC &amp; NETWORK INSIGHTS API</a></li>
<li class="toctree-l1"><a class="reference internal" href="logos-icons.html">LOGOS-ICONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="PDFs.html">PDFs</a></li>
<li class="toctree-l1"><a class="reference internal" href="CloudHeroes.html">CLOUD NETWORKING HEROES PROGRAM</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/lab2.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 2 - TRANSIT NETWORKING</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">1. Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multicloud-connectivity-overview">2. Multicloud Connectivity Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#topology">3. Topology</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-monitoring-check-using-the-gatus-app">3.1 Preliminary Monitoring Check Using the Gatus APP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-monitoring-check-using-an-ssh-client-bonus">3.2 Preliminary Monitoring Check Using an SSH Client <span style="color:#33ECFF">(BONUS)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cloud-assets-to-retrieve-ip-addresses">3.2.1 Cloud Assets (to retrieve IP addresses)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#topology-to-retrieve-ip-addresses-bonus">3.2.2 Topology (to retrieve IP addresses) <span style="color:#33ECFF">(BONUS)</span></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-using-your-ssh-client-bonus">3.2.3 Verification Using Your SSH Client <span style="color:#33ECFF">(BONUS)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-copilot">4. Aviatrix CoPilot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-configuration">5. Initial configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-transit-gateways">5.1 Aviatrix Transit Gateways</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#transit-gateway-in-aws-us-east-2">5.1.1 Transit Gateway in AWS US-EAST-2</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-spoke-gateways">5.2 Aviatrix Spoke Gateways</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-aws">5.2.1 Spoke Gateway in AWS</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-azure">5.2.2 Spoke Gateway in Azure</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-gcp">5.2.3 Spoke Gateway in GCP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-the-cloud-fabric">6. Explore the Cloud Fabric</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-spoke-to-transit-gateways-attachments">7. Aviatrix Spoke to Transit Gateways Attachments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-aws">7.1 Spoke to Transit Attachment in AWS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-azure">7.2 Spoke to Transit Attachment in Azure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-gcp">7.3 Spoke to Transit Attachment in GCP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copilot-verification-of-spoke-transit-attachments">8. CoPilot Verification of Spoke-Transit Attachments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multicloud-transit-peerings">9. Multicloud Transit Peerings</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aws-and-azure">9.1 AWS and Azure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#azure-and-gcp">9.2 Azure and GCP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-and-aws">9.3 GCP and AWS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">10. Verification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-of-transit-peerings-on-copilot-cloud-fabric">10.1 Verification of Transit Peerings on CoPilot (Cloud Fabric)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-of-transit-peerings-on-copilot-topology">10.2 Verification of Transit Peerings on CoPilot (Topology)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#route-info-db">10.3 Route Info DB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-connectivity-testing">11. Final Connectivity Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test-using-the-gatus-app">11.1 Connectivity Test Using the Gatus App</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test-using-the-ssh-client-bonus">10.2 Connectivity Test Using the SSH Client <span style="color:#33ECFF">(BONUS)</span></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-2-transit-networking">
<h1>Lab 2 - TRANSIT NETWORKING<a class="headerlink" href="#lab-2-transit-networking" title="Link to this heading">#</a></h1>
<section id="objective">
<h2>1. Objective<a class="headerlink" href="#objective" title="Link to this heading">#</a></h2>
<p>Build the <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">Cloud</span> <span class="pre">Native</span> <span class="pre">Security</span> <span class="pre">Fabric</span> <span class="pre">(CNSF)</span></code> by deploying both Spoke and Transit Gateways to effectively secure communication across your multicloud environment.</p>
<p>In this lab, we will use Aviatrix CoPilot to connect three major clouds, i.e. Azure, GCP and AWS. The workloads in VPCs/VNets, in all three clouds, must communicate without manual configuration on the native consoles.</p>
</section>
<section id="multicloud-connectivity-overview">
<h2>2. Multicloud Connectivity Overview<a class="headerlink" href="#multicloud-connectivity-overview" title="Link to this heading">#</a></h2>
<p>Enterprises are relying increasingly on multiple clouds (multicloud) providers. However, setting up the connectivity between those providers is difficult. Moreover, maintaining and monitoring the tunnels is time-consuming and cumbersome to troubleshoot.</p>
<p>Aviatrix simplifies this by providing simple, point-and-click tunnel creation between cloud providers.</p>
<p>Additionally, Aviatrix gives you a single, centralised location from which to troubleshoot and monitor your connections.</p>
</section>
<section id="topology">
<h2>3. Topology<a class="headerlink" href="#topology" title="Link to this heading">#</a></h2>
<p>In this lab, as illustrated in the topology below, we will configure the grey Aviatrix gateways, the grey attachments between Transit and Spoke, and the grey peerings between Transit and Transit. This configuration will be applied only in the following regions:</p>
<ul class="simple">
<li><p><strong>AWS: us-east-2</strong></p></li>
<li><p><strong>GCP: us-central-1</strong></p></li>
<li><p><strong>Azure: west-us</strong> (specifically for Spoke1)</p></li>
</ul>
<p>The rest of the topology has been pre-provisioned to save time, including the test instances/VMs and the <strong>Edge</strong> Gateway inside the on-premises data center.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/lab2-topology.png"><img alt="../_images/lab2-topology.png" src="../_images/lab2-topology.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Initial pre-provisioned topology</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<section id="preliminary-monitoring-check-using-the-gatus-app">
<h3>3.1 Preliminary Monitoring Check Using the Gatus APP<a class="headerlink" href="#preliminary-monitoring-check-using-the-gatus-app" title="Link to this heading">#</a></h3>
<p>All pre-deployed instances are running <a class="reference external" href="https://gatus.io/">Gatus</a> and are attempting to connect with each other using various protocols, including <strong>ICMP</strong> and <strong>TCP</strong> on ports 80,443 and 22.</p>
<p>You can access the Gatus dashboard directly from your POD Portal.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/lab2-gatus00.png"><img alt="../_images/lab2-gatus00.png" src="../_images/lab2-gatus00.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Gatus from the POD Portal</span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You can select any instances from the three CSP environments, and you will find that the connectivity is indeed broken. This is because all the involved VPCs are currently isolated, as you have not yet created the <code class="docutils literal notranslate"><span class="pre">CNSF</span></code> (i.e. Cloud NAtive Security Fabric).</p>
<ul class="simple">
<li><p>Select the EC2 instance “<strong><em>aws-us-east-2-spoke1-test1</em></strong>” and then enter the credentials to access the Gatus App!</p></li>
</ul>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/lab2-gatus01.png"><img alt="../_images/lab2-gatus01.png" src="../_images/lab2-gatus01.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">aws-us-east-2-spoke1-test1</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/lab2-gatus02.png"><img alt="../_images/lab2-gatus02.png" src="../_images/lab2-gatus02.png" style="height: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">aws-us-east-2-spoke1-test1 on the Dynamic Topology</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The credentials can be retrieved from your personal POD Portal. Once you have entered the credentials, click on <strong>“Sign In”</strong>.</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/lab2-gatus03.png"><img alt="../_images/lab2-gatus03.png" src="../_images/lab2-gatus03.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Credentials</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>After signing into the Gatus App, you’ll observe that two protocols are currently in use: <code class="docutils literal notranslate"><span class="pre">ICMP</span></code> and <code class="docutils literal notranslate"><span class="pre">SSH</span></code>.</p>
<p>The only item showing a green status is <code class="docutils literal notranslate"><span class="pre">aws-us-east-2-spoke1-test2</span></code>.</p>
<p>Both <strong>ICMP</strong> and <strong>SSH</strong> are functioning perfectly here. This success is attributed to the fact that this communication occurs within the same VPC (<strong><code class="docutils literal notranslate"><span class="pre">intra-VPC</span> <span class="pre">traffic</span></code></strong>), meaning it does not traverse other VPCs, regions, or cloud service providers. As a result, the Spoke Gateway is not involved in this scenario.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../_images/lab2-gatus04.png"><img alt="../_images/lab2-gatus04.png" src="../_images/lab2-gatus04.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">ICMP</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../_images/lab2-gatus05.png"><img alt="../_images/lab2-gatus05.png" src="../_images/lab2-gatus05.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">SSH</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../_images/lab2-intravpc.png"><img alt="../_images/lab2-intravpc.png" src="../_images/lab2-intravpc.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">Normal intra-vpc traffic</span><a class="headerlink" href="#id8" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Check the <strong>Gatus App</strong> status for the remaining instances as well.</p>
</div>
</section>
<section id="preliminary-monitoring-check-using-an-ssh-client-bonus">
<h3>3.2 Preliminary Monitoring Check Using an SSH Client <span style='color:#33ECFF'>(BONUS)</span></summary><a class="headerlink" href="#preliminary-monitoring-check-using-an-ssh-client-bonus" title="Link to this heading">#</a></h3>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><strong>BONUS</strong>: These sections should be completed only if you do not have a laptop with restrictions on <em>port 22</em>—typically a corporate laptop connected to the corporate network—and if you prefer to use your personal SSH client for greater control.</p>
</div>
<p>Alternatively, if you want an additional verification, you can also access all the istances using an SSH client.</p>
<ul class="simple">
<li><p>Navigate to your POD Portal and search for the widget assigned to the <strong><em>aws-us-east-2-spoke1-test1</em></strong> instance within the LAB2 and LAB3 sections. Then copy on the clipboard the <ins>symbolic public DNS name</ins> of the istance!</p></li>
</ul>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../_images/lab2-gatus06.png"><img alt="../_images/lab2-gatus06.png" src="../_images/lab2-gatus06.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">DNS name</span><a class="headerlink" href="#id9" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now, open your <strong>SSH client</strong> and enter the command to access the EC2 instance using your credentials!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>student@...
</pre></div>
</div>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="../_images/lab2-gatus07.png"><img alt="../_images/lab2-gatus07.png" src="../_images/lab2-gatus07.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">SSH client</span><a class="headerlink" href="#id10" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If the SSH connection to the symbolic DNS name fails, as shown in the screenshot, please proceed with either <strong>Task 3.2.1</strong> or <strong>Task 3.2.2</strong>.</p>
<figure class="align-center" id="id11">
<img alt="../_images/lab2-sshfails.png" src="../_images/lab2-sshfails.png" />
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">DNS fails</span><a class="headerlink" href="#id11" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<p>You can also access your instances using also their <strong>Public IP addresses</strong>! You can retrieve them through your CoPilot, specifically from two sections:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Cloud</span> <span class="pre">Assets</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Topology</span></code></p></li>
</ol>
<section id="cloud-assets-to-retrieve-ip-addresses">
<h4>3.2.1 Cloud Assets (to retrieve IP addresses)<a class="headerlink" href="#cloud-assets-to-retrieve-ip-addresses" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Navigate to <strong>CoPilot &gt; Cloud Resources &gt; Cloud Assets</strong> and filer based on the keyword <code class="docutils literal notranslate"><span class="pre">&quot;aws-us-east-2-spoke1-test1&quot;</span></code>.</p></li>
<li><p>Copy its <strong>public</strong> ip address and use it with your SSH client.</p></li>
</ul>
<figure class="align-center" id="id12">
<img alt="../_images/lab2-sshclient10.png" src="../_images/lab2-sshclient10.png" />
<figcaption>
<p><span class="caption-number">Fig. 41 </span><span class="caption-text">Search the test instance</span><a class="headerlink" href="#id12" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Within the Cloud Assets, you can also retrieve the <strong>Private IP addresses</strong> for the classic EAST-WEST and NORTH-SOUTH traffic.</p>
</div>
<p>Now access the EC2 instance using its public IP address:</p>
<figure class="align-center" id="id13">
<a class="reference internal image-reference" href="../_images/lab2-sshclient20.png"><img alt="../_images/lab2-sshclient20.png" src="../_images/lab2-sshclient20.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 42 </span><span class="caption-text">SSH with public IP address</span><a class="headerlink" href="#id13" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="topology-to-retrieve-ip-addresses-bonus">
<h4>3.2.2 Topology (to retrieve IP addresses) <span style='color:#33ECFF'>(BONUS)</span></summary><a class="headerlink" href="#topology-to-retrieve-ip-addresses-bonus" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Navigate to <strong>CoPilot &gt; Topology &gt; Overview (Default Tab)</strong> and enter <strong><em>aws-us-east-1-spoke1-test1</em></strong> in the <strong>Search</strong> field located on the right-hand side.</p></li>
</ul>
<figure class="align-center" id="id14">
<a class="reference internal image-reference" href="../_images/lab02-searchfield.png"><img alt="../_images/lab02-searchfield.png" src="../_images/lab02-searchfield.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 43 </span><span class="caption-text">Search for any instances within the topology</span><a class="headerlink" href="#id14" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now, navigate to the <strong>Properties</strong> window, locate the Public IP address of the instance, and copy it to your clipboard!</p>
<figure class="align-center" id="id15">
<a class="reference internal image-reference" href="../_images/lab02-searchfield00.png"><img alt="../_images/lab02-searchfield00.png" src="../_images/lab02-searchfield00.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text">Properties</span><a class="headerlink" href="#id15" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In the <strong>Properties</strong> window under the Topology section of your CoPilot, you can also access the <strong>Private IP addresses</strong> for EAST-WEST traffic.</p>
</div>
</section>
<section id="verification-using-your-ssh-client-bonus">
<h4>3.2.3 Verification Using Your SSH Client <span style='color:#33ECFF'>(BONUS)</span></summary><a class="headerlink" href="#verification-using-your-ssh-client-bonus" title="Link to this heading">#</a></h4>
<p>Now that you have logged in to the <strong><em>aws-us-east-2-spoke1-test1</em></strong> successfully, you can issue your ping commands towards the <strong>Private IP address</strong> of the other instances!</p>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="../_images/lab2-sshclient00.png"><img alt="../_images/lab2-sshclient00.png" src="../_images/lab2-sshclient00.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 45 </span><span class="caption-text">SSH client</span><a class="headerlink" href="#id16" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id17">
<a class="reference internal image-reference" href="../_images/lab2-pingfails.png"><img alt="../_images/lab2-pingfails.png" src="../_images/lab2-pingfails.png" style="height: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">Ping outcomes</span><a class="headerlink" href="#id17" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Also, please verify whether the <strong>SSH</strong> protocol is functioning correctly with the other instances.</p>
</div>
</section>
</section>
</section>
<section id="aviatrix-copilot">
<h2>4. Aviatrix CoPilot<a class="headerlink" href="#aviatrix-copilot" title="Link to this heading">#</a></h2>
<p>Now, let’s continue navigating through the Aviatrix Centralized Management Node, CoPilot.</p>
<p>Navigate to your POD portal, click on the <code class="docutils literal notranslate"><span class="pre">&quot;Open</span> <span class="pre">Copilot&quot;</span></code> button and enter the credentials!</p>
<figure class="align-center" id="id18">
<a class="reference internal image-reference" href="../_images/lab2-gatus0600.png"><img alt="../_images/lab2-gatus0600.png" src="../_images/lab2-gatus0600.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">POD Portal</span><a class="headerlink" href="#id18" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id19">
<a class="reference internal image-reference" href="../_images/lab2-gatus0601.png"><img alt="../_images/lab2-gatus0601.png" src="../_images/lab2-gatus0601.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">CoPilot UI - Welcome page</span><a class="headerlink" href="#id19" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The test VPCs/VNet you created in <strong>Lab 1</strong> will not be used in other labs.</p>
<p>For the sake of simplicity, the Transits will NOT be deployed in pairs in this lab. As a best practice, Aviatrix recommends deploying <strong>two</strong> Transits to ensure high availability.</p>
</div>
<p>The CoPilot <em>Dashboard</em> should look something like this:</p>
<figure class="align-center" id="id20">
<a class="reference internal image-reference" href="../_images/lab2-dashboard.png"><img alt="../_images/lab2-dashboard.png" src="../_images/lab2-dashboard.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">Dashboard</span><a class="headerlink" href="#id20" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Before you begin building your multicloud infrastructure, please adjust the <strong>fetch timers</strong> in CoPilot.</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Navigate to <strong>CoPilot &gt; Settings &gt; Resources &gt; Task Server</strong></p>
</div>
<p>Ensure that <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">Topology</span></code>, <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">Instances</span></code>, <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">GW</span> <span class="pre">Routes</span></code>, <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">VPC</span> <span class="pre">Routes</span></code>, <code class="docutils literal notranslate"><span class="pre">CostIQ</span> <span class="pre">Billing</span></code> and <code class="docutils literal notranslate"><span class="pre">CostIQ</span> <span class="pre">CSP</span> <span class="pre">Cost</span></code> intervals are set to <strong>“1 Second”</strong> each and then click on <strong>SAVE</strong>.</p>
<figure class="align-center" id="id21">
<a class="reference internal image-reference" href="../_images/lab2-timer.png"><img alt="../_images/lab2-timer.png" src="../_images/lab2-timer.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">Task Server 01</span><a class="headerlink" href="#id21" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id22">
<a class="reference internal image-reference" href="../_images/lab2-timer99.png"><img alt="../_images/lab2-timer99.png" src="../_images/lab2-timer99.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 51 </span><span class="caption-text">Task Server 02</span><a class="headerlink" href="#id22" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The order of the <strong><em>Task Servers</em></strong> on the screenshot above might be different on your CoPilot</p>
</div>
<figure class="align-center" id="id23">
<img alt="../_images/lab2-fetchtopology.png" src="../_images/lab2-fetchtopology.png" />
<figcaption>
<p><span class="caption-number">Fig. 52 </span><span class="caption-text">Fetch Topology</span><a class="headerlink" href="#id23" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id24">
<img alt="../_images/lab2-fetchinstances.png" src="../_images/lab2-fetchinstances.png" />
<figcaption>
<p><span class="caption-number">Fig. 53 </span><span class="caption-text">Fetch Instances</span><a class="headerlink" href="#id24" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id25">
<img alt="../_images/lab2-fetchgw.png" src="../_images/lab2-fetchgw.png" />
<figcaption>
<p><span class="caption-number">Fig. 54 </span><span class="caption-text">Fetch GW</span><a class="headerlink" href="#id25" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id26">
<img alt="../_images/lab2-fetchvpc.png" src="../_images/lab2-fetchvpc.png" />
<figcaption>
<p><span class="caption-number">Fig. 55 </span><span class="caption-text">Fetch VPC</span><a class="headerlink" href="#id26" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id27">
<img alt="../_images/lab2-fetchcostiq.png" src="../_images/lab2-fetchcostiq.png" />
<figcaption>
<p><span class="caption-number">Fig. 56 </span><span class="caption-text">Fetch CostIQ Billing</span><a class="headerlink" href="#id27" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id28">
<img alt="../_images/lab2-fetchcostiq02.png" src="../_images/lab2-fetchcostiq02.png" />
<figcaption>
<p><span class="caption-number">Fig. 57 </span><span class="caption-text">Fetch CostIQ CSP Cost</span><a class="headerlink" href="#id28" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>After that, click on <strong>Commit</strong>.</p>
<figure class="align-center" id="id29">
<a class="reference internal image-reference" href="../_images/lab2-commit.png"><img alt="../_images/lab2-commit.png" src="../_images/lab2-commit.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 58 </span><span class="caption-text">Commit 01</span><a class="headerlink" href="#id29" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id30">
<a class="reference internal image-reference" href="../_images/lab2-commit23.png"><img alt="../_images/lab2-commit23.png" src="../_images/lab2-commit23.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 59 </span><span class="caption-text">Commit 02</span><a class="headerlink" href="#id30" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These are very aggressive settings. In a Production environment, you should not set these intervals that frequently!</p>
</div>
</section>
<section id="initial-configuration">
<h2>5. Initial configuration<a class="headerlink" href="#initial-configuration" title="Link to this heading">#</a></h2>
<p>Navigate to <strong>CoPilot &gt; Dashboard</strong> and check the <code class="docutils literal notranslate"><span class="pre">Gateways</span> <span class="pre">Health</span></code> either of the Spoke GW Clusters or the Transit GW Clusters.</p>
<figure class="align-center" id="id31">
<img alt="../_images/lab2-dashboardgw.png" src="../_images/lab2-dashboardgw.png" />
<figcaption>
<p><span class="caption-number">Fig. 60 </span><span class="caption-text">Transit, Spoke &amp; Edge</span><a class="headerlink" href="#id31" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>When you begin this lab, you should have <strong>six</strong> Gateway Clusters (i.e. 3x Transit GWs clusters, 2x Spoke GWs clusters and 1x Edge cluster) in your pod.</p>
<ul class="simple">
<li><p><strong>3x</strong> <span style='color:green'>Transit GW Clusters</span></p></li>
<li><p><strong>2x</strong> <span style='color:orange'>Spoke GW Clusters</span></p></li>
<li><p><strong>1x</strong> <span style='color:violet'>Edge GW Cluster</span></p></li>
</ul>
<p>If you go to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Overview (default tab)</strong>, you will notice that the number of Transit Gateways is set to <strong>three</strong> indeed, whereas the number of Spoke Gateways is set to <strong>two</strong>.</p>
<figure class="align-center" id="id32">
<img alt="../_images/lab2-cluster.png" src="../_images/lab2-cluster.png" />
<figcaption>
<p><span class="caption-number">Fig. 61 </span><span class="caption-text">These are Clusters of GWs</span><a class="headerlink" href="#id32" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>This view within the Cloud Fabric section indicates the number of <strong><em>clusters</em></strong> for each gateway type, rather than the exact number of individual gateways.</p>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong> to see that there are a total of three Transit Gateways (note: public IPs may vary).</p>
<figure class="align-center" id="id33">
<a class="reference internal image-reference" href="../_images/lab2-clustertransit.png"><img alt="../_images/lab2-clustertransit.png" src="../_images/lab2-clustertransit.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 62 </span><span class="caption-text">Transit GWs Clusters</span><a class="headerlink" href="#id33" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can deploy up to maximum <strong>two</strong> Transit Gateways per each Transit VPC/VNet/VCN.</p>
</div>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Spoke Gateways</strong> and explore the list of the available Spoke gateways. You can find out that there are a total of <strong>three</strong> Spoke Gateways (once again, the Public IPs may differ):</p>
<figure class="align-center" id="id34">
<a class="reference internal image-reference" href="../_images/lab2-clusterspoke.png"><img alt="../_images/lab2-clusterspoke.png" src="../_images/lab2-clusterspoke.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 63 </span><span class="caption-text">Spoke GWs Clusters</span><a class="headerlink" href="#id34" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You will notice that the AWS cluster includes two Spoke Gateways, while the Azure deployment has only a single Spoke Gateway. This is a valid configuration. The number of Spoke Gateways you should deploy per Spoke VPC/VNet/VCN depends on your architecture design.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can deploy up to maximum <strong>fifteen</strong> Spoke Gateways per each Spoke VPC/VNet/VCN.</p>
</div>
<section id="aviatrix-transit-gateways">
<h3>5.1 Aviatrix Transit Gateways<a class="headerlink" href="#aviatrix-transit-gateways" title="Link to this heading">#</a></h3>
<p>In this section, you will experience the power and simplicity of the Aviatrix platform by deploying (i.e. creating) 4 gateways:</p>
<ul class="simple">
<li><p><strong>Transit gateway in AWS US East 2:</strong> <span style='color:#479608'>aws-us-east-2-transit</span></p></li>
<li><p><strong>Spoke gateway in AWS US East 2:</strong> <span style='color:#479608'>aws-us-east-2-spoke1</span></p></li>
<li><p><strong>Spoke gateway in Azure West US:</strong> <span style='color:#479608'>azure-west-us-spoke1</span></p></li>
<li><p><strong>Spoke gateway in GCP US Central 1:</strong> <span style='color:#479608'>gcp-us-central1-spoke1</span></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please pay close attention to each step, as a misconfiguration could result in <strong>20+</strong> minutes of lost time!</p>
</div>
<ul class="simple">
<li><p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways &gt; + Transit Gateway</strong></p></li>
</ul>
<figure class="align-center" id="id35">
<a class="reference internal image-reference" href="../_images/lab2-transitbutton.png"><img alt="../_images/lab2-transitbutton.png" src="../_images/lab2-transitbutton.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 64 </span><span class="caption-text">+Transit Gateway</span><a class="headerlink" href="#id35" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Deploy Aviatrix Transit Gateways in AWS <strong><em>East-2</em></strong> region. To save time, Aviatrix Transit Gateways in Azure, GCP and AWS east-1 region have already been pre-deployed in pairs for this lab.</p>
<section id="transit-gateway-in-aws-us-east-2">
<h4>5.1.1 Transit Gateway in AWS US-EAST-2<a class="headerlink" href="#transit-gateway-in-aws-us-east-2" title="Link to this heading">#</a></h4>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>aws-us-east-2-transit</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>AWS (Standard)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>aws-account </span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>us-east-2 (Ohio)</span></p></li>
<li><p><strong>VPC ID:</strong> <span style='color:#479608'>aws-us-east-2-transit (Make sure you don’t select aws-us-east-2-<strong>spoke1</strong> VPC)</span></p></li>
<li><p><strong>Instance Size:</strong> <span style='color:#479608'>c6in.large</span></p></li>
<li><p><strong>High Performance Encryption:</strong> <span style='color:#479608'><strong>On</strong></span></p></li>
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>us-east-2a</span></p></li>
<li><p><strong>Public IP:</strong> <span style='color:#479608'>Allocate New Static Public IP</span></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As soon as you select High Performance Encryption, <strong>/26</strong> subnets will appear in the drop-down window.</p>
</div>
<p>Click <strong>SAVE</strong>.</p>
<figure class="align-center" id="id36">
<img alt="../_images/lab2-transitcreation.png" src="../_images/lab2-transitcreation.png" />
<figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Create Transit Gateway</span><a class="headerlink" href="#id36" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only one Transit Gateway will be deployed in VPC <strong>aws-us-east2-transit</strong>.</p>
</div>
<p>You will immediately get a message as follows.</p>
<figure class="align-center" id="id37">
<img alt="../_images/lab2-gwmessage.png" src="../_images/lab2-gwmessage.png" />
<figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Gateway deployment in progress</span><a class="headerlink" href="#id37" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You may check the status of the gateway creation in the top right corner by expanding the <strong>task icon</strong>.</p>
<figure class="align-center" id="id38">
<img alt="../_images/lab2-taskicon.png" src="../_images/lab2-taskicon.png" />
<figcaption>
<p><span class="caption-number">Fig. 67 </span><span class="caption-text">Task icon</span><a class="headerlink" href="#id38" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>This action will instantiate the Transit Gateway with the following name:</p>
<ul class="simple">
<li><p><strong>aws-us-east-2-transit</strong></p></li>
</ul>
<p>Meanwhile the deployment is happening, you may proceed to the next section of this lab guide to deploy your Spoke gateways.</p>
</section>
</section>
<section id="aviatrix-spoke-gateways">
<h3>5.2 Aviatrix Spoke Gateways<a class="headerlink" href="#aviatrix-spoke-gateways" title="Link to this heading">#</a></h3>
<p>Navigate to the tab immediately to the right, which is <code class="docutils literal notranslate"><span class="pre">Spoke</span> <span class="pre">Gateways</span></code>.</p>
<p>This is <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Spoke Gateways &gt; + Spoke Gateway</strong>.</p>
<figure class="align-center" id="id39">
<a class="reference internal image-reference" href="../_images/lab2-spokecreate.png"><img alt="../_images/lab2-spokecreate.png" src="../_images/lab2-spokecreate.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 68 </span><span class="caption-text">+Spoke Gateway</span><a class="headerlink" href="#id39" title="Link to this image">#</a></p>
</figcaption>
</figure>
<section id="spoke-gateway-in-aws">
<h4>5.2.1 Spoke Gateway in AWS<a class="headerlink" href="#spoke-gateway-in-aws" title="Link to this heading">#</a></h4>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">Spoke</span> <span class="pre">Gateway&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only one Spoke Gateway will be deployed in VPC <strong>aws-us-east2-spoke1</strong>.</p>
</div>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>aws-us-east-2-spoke1</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>AWS (Standard)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>aws-account</span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>us-east-2 (Ohio)</span></p></li>
<li><p><strong>VPC ID:</strong> <span style='color:#479608'>aws-us-east-2-spoke1 (Make sure you don’t select aws-us-east-2-<strong>transit</strong> VPC)</span></p></li>
<li><p><strong>Instance Size:</strong> <span style='color:#479608'>t3.medium</span></p></li>
<li><p><strong>High Performance Encryption:</strong> <span style='color:#479608'><strong>Off</strong></span></p></li>
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>10.0.1.96/27 - aws-us-east-2-spoke1-Public-1-us-east-2a</span></p></li>
<li><p><strong>Public IP:</strong> <span style='color:#479608'>Allocate New Static Public IP</span></p></li>
</ul>
<p>Click <strong>SAVE</strong>.</p>
<figure class="align-center" id="id40">
<img alt="../_images/lab2-spokeinaws.png" src="../_images/lab2-spokeinaws.png" />
<figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Create Spoke Gateway in AWS</span><a class="headerlink" href="#id40" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>While the gateway is being created, you may proceed to the next section.</p>
</section>
<section id="spoke-gateway-in-azure">
<h4>5.2.2 Spoke Gateway in Azure<a class="headerlink" href="#spoke-gateway-in-azure" title="Link to this heading">#</a></h4>
<p>Repeat the previous steps for Azure, click on the button <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">Spoke</span> <span class="pre">Gateway&quot;</span></code> and ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">Spoke</span> <span class="pre">Gateway&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only one Spoke Gateway will be deployed in VNet <strong>azure-west-us-spoke1</strong>.</p>
</div>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>azure-west-us-spoke1</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>Azure (Global)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>azure-account</span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>West US</span></p></li>
<li><p><strong>VNet:</strong> <span style='color:#479608'>azure-west-us-spoke1 (Make sure you don’t select azure-west-us-<strong>spoke2</strong> VPC)</span></p></li>
<li><p><strong>Instance Size:</strong> <span style='color:#479608'>Standard_B2ms</span></p></li>
<li><p><strong>High Performance Encryption:</strong> <span style='color:#479608'><strong>Off</strong></span></p></li>
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>192.168.1.0/28 - azure-west-us-spoke1-Public-gateway-subnet-1</span></p></li>
<li><p><strong>Public IP:</strong> <span style='color:#479608'>Allocate New Static Public IP</span></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure you <ins>do not select the subnets that begins with az-1, az-2, or az-3</ins>. It is Aviatrix’s recommended practice to deploy gateways in subnets with ‘gateway’ in their name, whereas workloads in subnets that do not have ‘gateway’ in their name).</p>
</div>
<figure class="align-center" id="id41">
<img alt="../_images/lab2-rightsubnet.png" src="../_images/lab2-rightsubnet.png" />
<figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">Subnet selection</span><a class="headerlink" href="#id41" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on <strong>SAVE</strong>.</p>
<figure class="align-center" id="id42">
<img alt="../_images/lab2-spokeinazure.png" src="../_images/lab2-spokeinazure.png" />
<figcaption>
<p><span class="caption-number">Fig. 71 </span><span class="caption-text">Spoke GW in Azure</span><a class="headerlink" href="#id42" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>While the gateway is being created, you may proceed to the next section.</p>
</section>
<section id="spoke-gateway-in-gcp">
<h4>5.2.3 Spoke Gateway in GCP<a class="headerlink" href="#spoke-gateway-in-gcp" title="Link to this heading">#</a></h4>
<p>Repeat the previous steps for GCP. Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">Spoke</span> <span class="pre">Gateway&quot;</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only one Spoke Gateway will be deployed in VPC <strong>gcp-us-central1-spoke1</strong>.</p>
</div>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>gcp-us-central1-spoke1</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>GCP</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>gcp-account</span></p></li>
<li><p><strong>VPC:</strong> <span style='color:#479608'>gcp-us-<strong>central1</strong>-spoke1 (Make sure you don’t select gcp-us-<strong>west2</strong>-spoke1 VPC)</span></p></li>
<li><p><strong>Instance Size:</strong> <span style='color:#479608'>n1-standard-1</span></p></li>
<li><p><strong>High Performance Encryption:</strong> <span style='color:#479608'><strong>Off</strong></span></p></li>
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>172.16.1.0/24 us-central1 | gcp-us-central1-spoke1-sub1</span></p></li>
<li><p><strong>Zone:</strong> <span style='color:#479608'>us-central1-a</span></p></li>
<li><p><strong>Public IP:</strong> <span style='color:#479608'>Allocate New Static Public IP</span></p></li>
</ul>
<p>Click <strong>SAVE</strong>.</p>
<figure class="align-center" id="id43">
<img alt="../_images/lab2-spokeingcp.png" src="../_images/lab2-spokeingcp.png" />
<figcaption>
<p><span class="caption-number">Fig. 72 </span><span class="caption-text">Spoke GW in GCP</span><a class="headerlink" href="#id43" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>You can monitor the progress of the gateway deployment at any time by expanding the <strong>Task icon</strong> in the top right corner of CoPilot.</p>
<p><ins>Please keep in mind that the gateway creation process may take several minutes to complete, so your patience is appreciated!</ins></p>
</div>
<figure class="align-center" id="id44">
<img alt="../_images/lab2-inprogress2.png" src="../_images/lab2-inprogress2.png" />
<figcaption>
<p><span class="caption-number">Fig. 73 </span><span class="caption-text">Deployment in progress</span><a class="headerlink" href="#id44" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Once all gateways have been created, verify their presence by navigating to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Overview (default tab)</strong> to ensure there are a total of <strong>nine</strong> GW clusters.</p>
<figure class="align-center" id="id45">
<img alt="../_images/lab2-14gws.png" src="../_images/lab2-14gws.png" />
<figcaption>
<p><span class="caption-number">Fig. 74 </span><span class="caption-text">Dashboard</span><a class="headerlink" href="#id45" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>After creating the Transit Gateway in the AWS US-East-1 region and the single Spoke Gateways in each cloud, the topology will look like this.</p>
<figure class="align-center" id="id46">
<a class="reference internal image-reference" href="../_images/lab2-temptopology.png"><img alt="../_images/lab2-temptopology.png" src="../_images/lab2-temptopology.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 75 </span><span class="caption-text">Overview of the new topology</span><a class="headerlink" href="#id46" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
</section>
<section id="explore-the-cloud-fabric">
<h2>6. Explore the Cloud Fabric<a class="headerlink" href="#explore-the-cloud-fabric" title="Link to this heading">#</a></h2>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Topology &gt; Overview (default tab)</strong>, then click on  the <code class="docutils literal notranslate"><span class="pre">&quot;Managed&quot;</span></code> button to only showing the Managed VPCs!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please keep in mind that the topology view may look different on your laptop depending on your screen resolution and zoom level.</p>
</div>
<figure class="align-center" id="id47">
<a class="reference internal image-reference" href="../_images/lab2-newuitopo.png"><img alt="../_images/lab2-newuitopo.png" src="../_images/lab2-newuitopo.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 76 </span><span class="caption-text">Managed VPCs and Unmanaged VPCs</span><a class="headerlink" href="#id47" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Managed VPC</strong> = Indicates an Aviatrix gateway is running in the VPC/VNet.</p>
<p><strong>Unmanaged VPC</strong> = Indicates no Aviatrix gateways exist in the VPC/VNet.</p>
</div>
<p>Now you can click on the <code class="docutils literal notranslate"><span class="pre">&quot;Collapse</span> <span class="pre">all</span> <span class="pre">VPC/VNets&quot;</span></code> button on the bottom right-hand side, as depicted below.</p>
<figure class="align-center" id="id48">
<a class="reference internal image-reference" href="../_images/lab2-collapse.png"><img alt="../_images/lab2-collapse.png" src="../_images/lab2-collapse.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 77 </span><span class="caption-text">Collapse button</span><a class="headerlink" href="#id48" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id49">
<img alt="../_images/lab2-topologyoverview.png" src="../_images/lab2-topologyoverview.png" />
<figcaption>
<p><span class="caption-number">Fig. 78 </span><span class="caption-text">VPC circles</span><a class="headerlink" href="#id49" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The inner circle represents the Transit Gateway VPCs, while the outer circle represents the Spoke Gateway VPCs.</p>
<p>At this stage, it is clear that the spokes are not yet connected to the transits</p>
</div>
<p>In addition, you can explore the components of any of the gateways in terms of subnets and Virtual Machines that reside within the VPC/VNet.</p>
</section>
<section id="aviatrix-spoke-to-transit-gateways-attachments">
<h2>7. Aviatrix Spoke to Transit Gateways Attachments<a class="headerlink" href="#aviatrix-spoke-to-transit-gateways-attachments" title="Link to this heading">#</a></h2>
<p>In this section you are going to attach the Aviatrix Spoke Gateways created above in each cloud, to their corresponding Aviatrix Transit Gateways.</p>
<section id="spoke-to-transit-attachment-in-aws">
<h3>7.1 Spoke to Transit Attachment in AWS<a class="headerlink" href="#spoke-to-transit-attachment-in-aws" title="Link to this heading">#</a></h3>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Spoke Gateways</strong> and edit the Spoke Gateway <strong><em>aws-us-east-2-spoke1</em></strong>, clicking on the pencil icon:</p>
<figure class="align-center" id="id50">
<a class="reference internal image-reference" href="../_images/lab2-spokeinawstotransit.png"><img alt="../_images/lab2-spokeinawstotransit.png" src="../_images/lab2-spokeinawstotransit.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 79 </span><span class="caption-text">Attachment for AWS</span><a class="headerlink" href="#id50" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>aws-us-east-<span style='color:violet'>2</span>-transit</em></strong> (do not select the <strong><em>aws-us-east-1-transit</em></strong>) from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id51">
<img alt="../_images/lab2-editspokeinaws.png" src="../_images/lab2-editspokeinaws.png" />
<figcaption>
<p><span class="caption-number">Fig. 80 </span><span class="caption-text">Edit Spoke in AWS</span><a class="headerlink" href="#id51" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You will see immediately a message informing that the updating is in progress.</p>
<figure class="align-center" id="id52">
<img alt="../_images/lab2-immediatemessage.png" src="../_images/lab2-immediatemessage.png" />
<figcaption>
<p><span class="caption-number">Fig. 81 </span><span class="caption-text">Update in progress</span><a class="headerlink" href="#id52" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="spoke-to-transit-attachment-in-azure">
<h3>7.2 Spoke to Transit Attachment in Azure<a class="headerlink" href="#spoke-to-transit-attachment-in-azure" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>azure-west-us-spoke1</strong> to <strong>azure-west-us-transit</strong></p></li>
</ul>
<p>Edit the Spoke Gateway <strong><em>azure-west-us-spoke1</em></strong> (not the <strong>spoke2</strong>), clicking on the pencil icon.</p>
<figure class="align-center" id="id53">
<a class="reference internal image-reference" href="../_images/lab2-editspokeinazure.png"><img alt="../_images/lab2-editspokeinazure.png" src="../_images/lab2-editspokeinazure.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 82 </span><span class="caption-text">Edit spoke in Azure</span><a class="headerlink" href="#id53" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>azure-west-us-transit</em></strong> from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id54">
<img alt="../_images/lab2-editazure.png" src="../_images/lab2-editazure.png" />
<figcaption>
<p><span class="caption-number">Fig. 83 </span><span class="caption-text">Attachment in Azure</span><a class="headerlink" href="#id54" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="spoke-to-transit-attachment-in-gcp">
<h3>7.3 Spoke to Transit Attachment in GCP<a class="headerlink" href="#spoke-to-transit-attachment-in-gcp" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>gcp-us-central1-spoke1</strong> to <strong>gcp-us-central1-transit</strong></p></li>
</ul>
<p>Edit the Spoke Gateway <strong><em>gcp-us-central-spoke1</em></strong>, clicking on the pencil icon:</p>
<figure class="align-center" id="id55">
<a class="reference internal image-reference" href="../_images/lab2-editspokeingcp.png"><img alt="../_images/lab2-editspokeingcp.png" src="../_images/lab2-editspokeingcp.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 84 </span><span class="caption-text">Edit spoke in GCP</span><a class="headerlink" href="#id55" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>gcp-us-central1-transit</em></strong> from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id56">
<img alt="../_images/lab2-editgcp.png" src="../_images/lab2-editgcp.png" />
<figcaption>
<p><span class="caption-number">Fig. 85 </span><span class="caption-text">Attachment in GCP</span><a class="headerlink" href="#id56" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Look for these three confirmations through the task icon, before proceeding.</p>
<figure class="align-center" id="id57">
<img alt="../_images/lab2-confirmation.png" src="../_images/lab2-confirmation.png" />
<figcaption>
<p><span class="caption-number">Fig. 86 </span><span class="caption-text">Confirmations</span><a class="headerlink" href="#id57" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>At this point, after <strong>attaching</strong> the Spoke Gateways to their respective Transit Gateways, the overall topology will look like this.</p>
<figure class="align-center" id="id58">
<a class="reference internal image-reference" href="../_images/lab2-topologywithattachments.png"><img alt="../_images/lab2-topologywithattachments.png" src="../_images/lab2-topologywithattachments.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 87 </span><span class="caption-text">New state of the Dynamic Topology</span><a class="headerlink" href="#id58" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Spoke Gateway azure-west-us-<strong>spoke2</strong> will be attached to its Transit Gateway in a subsequent lab, likewise the Spoke Gateways in AWS <strong>us-east-1</strong> will be attached to the Transit Gateway in the same region only in a subsequent lab.</p>
</div>
</section>
</section>
<section id="copilot-verification-of-spoke-transit-attachments">
<h2>8. CoPilot Verification of Spoke-Transit Attachments<a class="headerlink" href="#copilot-verification-of-spoke-transit-attachments" title="Link to this heading">#</a></h2>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Topology &gt; Overview</strong></p>
<p>Now, verify the spoke-transit attachments. You can see the dotted lines connecting the 3 spoke gateways to their respective transits.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be patient, it will take some minutes before seeing the changes reflected into the topology. Refresh the web page to see the change reflected on the map!</p>
</div>
<figure class="align-center" id="id59">
<img alt="../_images/lab2-attachment.png" src="../_images/lab2-attachment.png" />
<figcaption>
<p><span class="caption-number">Fig. 88 </span><span class="caption-text">Attachments</span><a class="headerlink" href="#id59" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id60">
<img alt="../_images/lab2-expandedtopology1.png" src="../_images/lab2-expandedtopology1.png" />
<figcaption>
<p><span class="caption-number">Fig. 89 </span><span class="caption-text">Expanded Topology</span><a class="headerlink" href="#id60" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Click on the <code class="docutils literal notranslate"><span class="pre">&quot;Legend&quot;</span></code> button to figure out what those icons represent.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Dashed line = Default IPSec tunnel</p>
<p>Solid line = HPE IPSec tunnel</p>
</div>
<figure class="align-center" id="id61">
<img alt="../_images/lab2-hpe.png" src="../_images/lab2-hpe.png" />
<figcaption>
<p><span class="caption-number">Fig. 90 </span><span class="caption-text">Legend</span><a class="headerlink" href="#id61" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="multicloud-transit-peerings">
<h2>9. Multicloud Transit Peerings<a class="headerlink" href="#multicloud-transit-peerings" title="Link to this heading">#</a></h2>
<p>In this section you are going to establish the peerings among the Aviatrix Transit Gateways.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Transit peering is <strong><em>bidirectional</em></strong>.</p>
<p>You do not need to configure peering in the opposite direction.</p>
</div>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong></p>
<section id="aws-and-azure">
<h3>9.1 AWS and Azure<a class="headerlink" href="#aws-and-azure" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>aws-us-east-2-transit</strong> to <strong>azure-west-us-transit</strong></p></li>
</ul>
<p>Edit the Transit Gateway <strong><em>aws-us-east-2-transit</em></strong>, clicking on the pencil icon:</p>
<figure class="align-center" id="id62">
<a class="reference internal image-reference" href="../_images/lab2-edittransitinaws.png"><img alt="../_images/lab2-edittransitinaws.png" src="../_images/lab2-edittransitinaws.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 91 </span><span class="caption-text">Edit Transit in AWS</span><a class="headerlink" href="#id62" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>azure-west-us-transit</em></strong> from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateways&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id63">
<img alt="../_images/lab2-peeringawsazure.png" src="../_images/lab2-peeringawsazure.png" />
<figcaption>
<p><span class="caption-number">Fig. 92 </span><span class="caption-text">Peering AWS-Azure</span><a class="headerlink" href="#id63" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="azure-and-gcp">
<h3>9.2 Azure and GCP<a class="headerlink" href="#azure-and-gcp" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>azure-west-us-transit</strong> to <strong>gcp-us-central1-transit</strong></p></li>
</ul>
<p>Edit the Transit Gateway <strong><em>azure-west-us-transit</em></strong>, clicking on the pencil icon:</p>
<figure class="align-center" id="id64">
<a class="reference internal image-reference" href="../_images/lab2-edittransitinazure.png"><img alt="../_images/lab2-edittransitinazure.png" src="../_images/lab2-edittransitinazure.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 93 </span><span class="caption-text">Edit Transit in Azure</span><a class="headerlink" href="#id64" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>gcp-us-central1-transit</em></strong> from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateways&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id65">
<img alt="../_images/lab2-peeringazuregcp.png" src="../_images/lab2-peeringazuregcp.png" />
<figcaption>
<p><span class="caption-number">Fig. 94 </span><span class="caption-text">Peering Azure-GCP</span><a class="headerlink" href="#id65" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="gcp-and-aws">
<h3>9.3 GCP and AWS<a class="headerlink" href="#gcp-and-aws" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>gcp-us-central1-transit</strong> to <strong>aws-us-east-2-transit</strong></p></li>
</ul>
<p>Edit the Transit Gateway <strong><em>gcp-us-central1-transit</em></strong>, clicking on the pencil icon:</p>
<figure class="align-center" id="id66">
<a class="reference internal image-reference" href="../_images/lab2-editgcp2.png"><img alt="../_images/lab2-editgcp2.png" src="../_images/lab2-editgcp2.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 95 </span><span class="caption-text">Edit Transit in GCP</span><a class="headerlink" href="#id66" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Select the Transit Gateway <strong><em>aws-us-east-2-transit</em></strong> (<ins>not the east-1 !</ins>) from the drop-down window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">To</span> <span class="pre">Transit</span> <span class="pre">Gateways&quot;</span></code>, and then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id67">
<img alt="../_images/lab2-peeringgcpaws.png" src="../_images/lab2-peeringgcpaws.png" />
<figcaption>
<p><span class="caption-number">Fig. 96 </span><span class="caption-text">Peering GCP-AWS</span><a class="headerlink" href="#id67" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>After this lab, the overall topology will appear as follows:</p>
<figure class="align-center" id="id68">
<a class="reference internal image-reference" href="../_images/lab2-peeringtopology.png"><img alt="../_images/lab2-peeringtopology.png" src="../_images/lab2-peeringtopology.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 97 </span><span class="caption-text">New Topopology state after Peerings deployment</span><a class="headerlink" href="#id68" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that the following pending elements will be completed in a subsequent lab:</p>
<ul class="simple">
<li><p>Attachment between <strong>aws-us-east-1-spoke1</strong> and <strong>aws-us-east-1-transit</strong></p></li>
<li><p>Peering between <strong>aws-us-east-1-transit</strong> and <strong>aws-us-east-2-transit</strong></p></li>
<li><p>Attachment between <strong>azure-west-us-spoke2</strong> and <strong>azure-west-us-transit</strong></p></li>
<li><p>Attachment between <strong>aws-us-east-2-transit</strong> and <strong>on-prem-dc-edge</strong></p></li>
</ul>
</div>
</section>
</section>
<section id="verification">
<h2>10. Verification<a class="headerlink" href="#verification" title="Link to this heading">#</a></h2>
<section id="verification-of-transit-peerings-on-copilot-cloud-fabric">
<h3>10.1 Verification of Transit Peerings on CoPilot (Cloud Fabric)<a class="headerlink" href="#verification-of-transit-peerings-on-copilot-cloud-fabric" title="Link to this heading">#</a></h3>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong>, select the Transit Gateway <strong><em>aws-us-east-2-transit</em></strong>, then select the <code class="docutils literal notranslate"><span class="pre">Attachments&quot;</span></code> tab and finally select the <code class="docutils literal notranslate"><span class="pre">&quot;Transit-Transit</span> <span class="pre">Peering&quot;</span></code> tab: you will see <strong>one</strong> connection per each peering, that correspond to the <code class="docutils literal notranslate"><span class="pre">two</span> <span class="pre">IPSec</span> <span class="pre">tunnels</span></code>.</p>
<figure class="align-center" id="id69">
<img alt="../_images/lab2-verification.png" src="../_images/lab2-verification.png" />
<figcaption>
<p><span class="caption-number">Fig. 98 </span><span class="caption-text">Verification</span><a class="headerlink" href="#id69" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="verification-of-transit-peerings-on-copilot-topology">
<h3>10.2 Verification of Transit Peerings on CoPilot (Topology)<a class="headerlink" href="#verification-of-transit-peerings-on-copilot-topology" title="Link to this heading">#</a></h3>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Topology &gt; Overview</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Refresh the web page!</p>
</div>
<p>Verify transit-transit peering. You can now see the dotted lines in the inner circle representing the configured full mesh peering between the three transits.</p>
<figure class="align-center" id="id70">
<img alt="../_images/lab2-peering.png" src="../_images/lab2-peering.png" />
<figcaption>
<p><span class="caption-number">Fig. 99 </span><span class="caption-text">Peerings</span><a class="headerlink" href="#id70" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id71">
<img alt="../_images/lab2-expanded2.png" src="../_images/lab2-expanded2.png" />
<figcaption>
<p><span class="caption-number">Fig. 100 </span><span class="caption-text">Expanded Topology</span><a class="headerlink" href="#id71" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="route-info-db">
<h3>10.3 Route Info DB<a class="headerlink" href="#route-info-db" title="Link to this heading">#</a></h3>
<p>Route Info DB is akin to the <em>Routing Information Base (RIB)</em>. It will provide the overall routing information of a Transit Gateway known by the CoPilot.</p>
<p>Navigate to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong> and select the Transit Gateway <strong><em>aws-us-east-2-transit</em></strong>:</p>
<figure class="align-center" id="id72">
<img alt="../_images/lab2-transitaws.png" src="../_images/lab2-transitaws.png" />
<figcaption>
<p><span class="caption-number">Fig. 101 </span><span class="caption-text">Explore Transit in AWS</span><a class="headerlink" href="#id72" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Then select the <code class="docutils literal notranslate"><span class="pre">&quot;Route</span> <span class="pre">DB&quot;</span></code> tab.
Pay special attention to <code class="docutils literal notranslate"><span class="pre">“Best</span> <span class="pre">Routes”</span></code>, its prefixes, type and metric value:</p>
<figure class="align-center" id="id73">
<img alt="../_images/lab2-rib.png" src="../_images/lab2-rib.png" />
<figcaption>
<p><span class="caption-number">Fig. 102 </span><span class="caption-text">Route DB</span><a class="headerlink" href="#id73" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="final-connectivity-testing">
<h2>11. Final Connectivity Testing<a class="headerlink" href="#final-connectivity-testing" title="Link to this heading">#</a></h2>
<p>Verify that each test instance can ping each other.</p>
<section id="connectivity-test-using-the-gatus-app">
<h3>11.1 Connectivity Test Using the Gatus App<a class="headerlink" href="#connectivity-test-using-the-gatus-app" title="Link to this heading">#</a></h3>
<p>Navigate to your POD Portal, locate the <code class="docutils literal notranslate"><span class="pre">Gatus</span> <span class="pre">widget</span></code>, and select <strong><em>aws-us-east-2-spoke1-test1</em></strong> as an example.</p>
<p>Then, sign in to the Gatus app.</p>
<figure class="align-center" id="id74">
<img alt="../_images/lab2-gastusfinal00.png" src="../_images/lab2-gastusfinal00.png" />
<figcaption>
<p><span class="caption-number">Fig. 103 </span><span class="caption-text">ICMP</span><a class="headerlink" href="#id74" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id75">
<img alt="../_images/lab2-gastusfinal01.png" src="../_images/lab2-gastusfinal01.png" />
<figcaption>
<p><span class="caption-number">Fig. 104 </span><span class="caption-text">SSH</span><a class="headerlink" href="#id75" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Reduce the polling timer from 5 minutes to <strong>10 seconds</strong> to expedite the visibility of the results.</p>
<figure class="align-center" id="id76">
<a class="reference internal image-reference" href="../_images/lab2-diminish.png"><img alt="../_images/lab2-diminish.png" src="../_images/lab2-diminish.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 105 </span><span class="caption-text">Timer</span><a class="headerlink" href="#id76" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<p>You will observe that both <strong>ICMP</strong> and <strong>SSH</strong> tests have successfully completed for all three instances:</p>
<ol class="arabic simple">
<li><p><strong><em>aws-us-east-2-spoke1-test2</em></strong> (enabled by the normal <code class="docutils literal notranslate"><span class="pre">intra-VPC</span> <span class="pre">traffic</span></code>)</p></li>
<li><p><strong><em>gcp-us-central1-spoke1-test1</em></strong>(enabled by the <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">MCNA</span></code>)</p></li>
<li><p><strong><em>azure-west-us-spoke1-test1</em></strong> (enabled by the <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">MCNA</span></code>)</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Review the Gatus App status for the other instances in Azure and GCP.</p>
</div>
</section>
<section id="connectivity-test-using-the-ssh-client-bonus">
<h3>10.2 Connectivity Test Using the SSH Client <span style='color:#33ECFF'>(BONUS)</span></summary><a class="headerlink" href="#connectivity-test-using-the-ssh-client-bonus" title="Link to this heading">#</a></h3>
<p>If you’re not satisfied with the Gatus dashboard, you can also use your personal <code class="docutils literal notranslate"><span class="pre">SSH</span> <span class="pre">client</span></code> to perform the connectivity tests!</p>
<ul class="simple">
<li><p>Open three terminal windows to SSH to the <strong>public IPs</strong> of the 3 spoke <strong>test instances/VMs</strong> in each cloud.</p></li>
</ul>
<p>Then ping the <strong>private</strong> IPs of each other VMs to test the Multi-Cloud connectivity.</p>
<p><ins>Refer to your pod portal for the public/private IPs or retrieve them from the <strong><em>Cloud Assets/Topology</em></strong></ins>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Refresh the web page, to see the changes reflected into your CoPilot’s topology!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">POD</span> <span class="pre">PORTAL</span></code></strong>:</p>
<p>Please note that both the public DNS names and private IP addresses of the <strong>test</strong> instances can be retrieved from your personal POD portal.</p>
<figure class="align-center" id="id77">
<img alt="../_images/lab2-newpic.png" src="../_images/lab2-newpic.png" />
<figcaption>
<p><span class="caption-number">Fig. 106 </span><span class="caption-text">POD Portal info</span><a class="headerlink" href="#id77" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">TOPOLOGY</span> <span class="pre">(CoPilot</span> <span class="pre">&gt;</span> <span class="pre">Cloud</span> <span class="pre">Fabric</span> <span class="pre">&gt;</span> <span class="pre">Topology)</span></code></strong>:</p>
<p>Explore the <strong><em>aws-us-east-2-spoke1</em></strong> VPC and select the instance <strong><em>aws-us-east-2-spoke1-test1</em></strong> with the <strong>EC2 instance logo</strong>, then check its properties: you will be able to fetch both Public and Private IP addresses.</p>
<figure class="align-center" id="id78">
<a class="reference internal image-reference" href="../_images/lab2-newpic3.png"><img alt="../_images/lab2-newpic3.png" src="../_images/lab2-newpic3.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 107 </span><span class="caption-text">Test Instance Properties</span><a class="headerlink" href="#id78" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not select the instance with the <strong>Aviatrix logo</strong>!</p>
<p><ins>You can’t SSH to any Aviatrix GWs !</ins></p>
<figure class="align-center" id="id79">
<img alt="../_images/lab2-newpic2.png" src="../_images/lab2-newpic2.png" />
<figcaption>
<p><span class="caption-number">Fig. 108 </span><span class="caption-text">Different Logos</span><a class="headerlink" href="#id79" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<ul class="simple">
<li><p>SSH into aws-us-<strong>east-2</strong>-spoke1-<span style='color:red'>test1</span> (ssh student&#64;public_ip)</p></li>
<li><p>SSH into azure-west-us-<strong>spoke1</strong>-<span style='color:red'>test1</span> (ssh student&#64;public_ip)</p></li>
<li><p>SSH into gcp-us-central1-spoke1-<span style='color:red'>test1</span> (ssh student&#64;public_ip)</p></li>
</ul>
<p>Run ping from the AWS instance to verify connectivity to Azure and GCP:</p>
<figure class="align-center" id="id80">
<img alt="../_images/lab2-pingfromaws.png" src="../_images/lab2-pingfromaws.png" />
<figcaption>
<p><span class="caption-number">Fig. 109 </span><span class="caption-text">Ping from AWS</span><a class="headerlink" href="#id80" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Run ping from Azure VM to verify connectivity to AWS and GCP:</p>
<figure class="align-center" id="id81">
<img alt="../_images/lab2-pingfromazure.png" src="../_images/lab2-pingfromazure.png" />
<figcaption>
<p><span class="caption-number">Fig. 110 </span><span class="caption-text">Ping from Azure</span><a class="headerlink" href="#id81" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Run ping from GCP VM to verify connectivity to Azure and AWS:</p>
<figure class="align-center" id="id82">
<img alt="../_images/lab2-pingfromgcp.png" src="../_images/lab2-pingfromgcp.png" />
<figcaption>
<p><span class="caption-number">Fig. 111 </span><span class="caption-text">Ping from GCP</span><a class="headerlink" href="#id82" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lab1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lab 1 - VPCs/VNets CREATION</p>
      </div>
    </a>
    <a class="right-next"
       href="lab3.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 3 - NETWORK SEGMENTATION</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">1. Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multicloud-connectivity-overview">2. Multicloud Connectivity Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#topology">3. Topology</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-monitoring-check-using-the-gatus-app">3.1 Preliminary Monitoring Check Using the Gatus APP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-monitoring-check-using-an-ssh-client-bonus">3.2 Preliminary Monitoring Check Using an SSH Client <span style="color:#33ECFF">(BONUS)</span></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cloud-assets-to-retrieve-ip-addresses">3.2.1 Cloud Assets (to retrieve IP addresses)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#topology-to-retrieve-ip-addresses-bonus">3.2.2 Topology (to retrieve IP addresses) <span style="color:#33ECFF">(BONUS)</span></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-using-your-ssh-client-bonus">3.2.3 Verification Using Your SSH Client <span style="color:#33ECFF">(BONUS)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-copilot">4. Aviatrix CoPilot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-configuration">5. Initial configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-transit-gateways">5.1 Aviatrix Transit Gateways</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#transit-gateway-in-aws-us-east-2">5.1.1 Transit Gateway in AWS US-EAST-2</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-spoke-gateways">5.2 Aviatrix Spoke Gateways</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-aws">5.2.1 Spoke Gateway in AWS</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-azure">5.2.2 Spoke Gateway in Azure</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-gateway-in-gcp">5.2.3 Spoke Gateway in GCP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-the-cloud-fabric">6. Explore the Cloud Fabric</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aviatrix-spoke-to-transit-gateways-attachments">7. Aviatrix Spoke to Transit Gateways Attachments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-aws">7.1 Spoke to Transit Attachment in AWS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-azure">7.2 Spoke to Transit Attachment in Azure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spoke-to-transit-attachment-in-gcp">7.3 Spoke to Transit Attachment in GCP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copilot-verification-of-spoke-transit-attachments">8. CoPilot Verification of Spoke-Transit Attachments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multicloud-transit-peerings">9. Multicloud Transit Peerings</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aws-and-azure">9.1 AWS and Azure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#azure-and-gcp">9.2 Azure and GCP</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-and-aws">9.3 GCP and AWS</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">10. Verification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-of-transit-peerings-on-copilot-cloud-fabric">10.1 Verification of Transit Peerings on CoPilot (Cloud Fabric)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verification-of-transit-peerings-on-copilot-topology">10.2 Verification of Transit Peerings on CoPilot (Topology)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#route-info-db">10.3 Route Info DB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-connectivity-testing">11. Final Connectivity Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test-using-the-gatus-app">11.1 Connectivity Test Using the Gatus App</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test-using-the-ssh-client-bonus">10.2 Connectivity Test Using the SSH Client <span style="color:#33ECFF">(BONUS)</span></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aviatrix ACE
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>