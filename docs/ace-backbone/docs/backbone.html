
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Backbone Lab &#8212; ACE Cloud Backbone &amp; Hybrid Connectivity</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/backbone';</script>
    <link rel="icon" href="../_static/aviatrix-favicon-32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Requirements" href="Requirements.html" />
    <link rel="prev" title="Welcome to ACE Cloud Backbone" href="home.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="home.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/aviatrix-logo.png" class="logo__image only-light" alt="ACE Cloud Backbone & Hybrid Connectivity - Home"/>
    <script>document.write(`<img src="../_static/aviatrix-logo.png" class="logo__image only-dark" alt="ACE Cloud Backbone & Hybrid Connectivity - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="home.html">
                    Welcome to ACE Cloud Backbone
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Backbone Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="Requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="quiz.html">Quiz and Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab.html">Quiz - Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="PDFs.html">PDFs</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/backbone.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Backbone Lab</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">Scenario</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-objective">Lab Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-set-up">Initial Set-up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-access-details">LAB Access Details</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-credentials">Access credentials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-pre-req">LAB Pre-Req</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-1-create-an-aws-tgw-using-the-copilot">Task #1: Create an AWS TGW using the CoPilot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-2-attach-vpc-to-aws-tgw">Task #2: Attach VPC to AWS TGW</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-3-create-an-aviatrix-transit-vpc">Task #3: Create an Aviatrix Transit VPC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-4-create-both-the-transit-gateways-and-the-peering">Task #4: Create both the Transit Gateways and the peering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-5-attach-transit-gateways-to-aws-tgw">Task #5: Attach Transit Gateways to aws-tgw</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-6-configure-bgp-asn">Task #6: Configure BGP ASN</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-7-edge-to-transits">Task #7: Edge to Transits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test">Connectivity Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="backbone-lab">
<h1>Backbone Lab<a class="headerlink" href="#backbone-lab" title="Link to this heading">#</a></h1>
<section id="scenario">
<h2>Scenario<a class="headerlink" href="#scenario" title="Link to this heading">#</a></h2>
<p>ABC Healthcare (a fictitious company), a leading healthcare provider, operates solely within the <strong>Azure</strong> cloud environment. The company decided expaning their cloud infrastructure also within AWS, however, they are facing cloud skills gap, because they do not have experties in AWS yet. Moreover, the company is heavily using the native CSP transit solutions (e.g. Azure Route Server).</p>
</section>
<section id="lab-objective">
<h2>Lab Objective<a class="headerlink" href="#lab-objective" title="Link to this heading">#</a></h2>
<p>You, the newly appointed solutions architect, have been assigned the following task:</p>
<ul class="simple">
<li><p>Create a <strong><em><code class="docutils literal notranslate"><span class="pre">multicloud</span> <span class="pre">backbone</span> <span class="pre">architecture</span></code></em></strong> that works in every cloud.</p></li>
<li><p>The solution should also provide <strong><em><code class="docutils literal notranslate"><span class="pre">hybrid</span> <span class="pre">connectivity</span></code></em></strong> towards the Data Center.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>Azure Route Server</strong> does not natively sypport connectivity to other Cloud Providers.</p>
<p>Aviatrix supports <code class="docutils literal notranslate"><span class="pre">Multicloud</span> <span class="pre">Transit</span></code>.</p>
</div>
</section>
<section id="initial-set-up">
<h2>Initial Set-up<a class="headerlink" href="#initial-set-up" title="Link to this heading">#</a></h2>
<p>1- Both the <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">Controller</span></code> and the <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">CoPilot</span></code> got already deployed in AWS, inside a dedicated MGMT VPC.</p>
<p>2- A pair of <code class="docutils literal notranslate"><span class="pre">Transit</span> <span class="pre">Gateways</span></code> got also deployed in Azure and attached to the existing <strong>Azure Route Server</strong>.</p>
<p>3- An <code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">Secure</span> <span class="pre">Edge</span></code> got already deployed inside the on-prem Data Center.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/backbone-initial-topology.png"><img alt="../_images/backbone-initial-topology.png" src="../_images/backbone-initial-topology.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Initial Topology</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="lab-access-details">
<h2>LAB Access Details<a class="headerlink" href="#lab-access-details" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong><em>FULL NAME</em></strong></p></th>
<th class="head text-center"><p><strong><em>COPILOT #</em></strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Nick Iliopoulos</p></td>
<td class="text-center"><p><a href="https://cplt.pod1.aviatrixlab.com" target="_blank">POD01</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Ashwini S</p></td>
<td class="text-center"><p><a href="https://cplt.pod2.aviatrixlab.com" target="_blank">POD02</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Jahem Leon Henry Ofosu N’Guetta</p></td>
<td class="text-center"><p><a href="https://cplt.pod3.aviatrixlab.com" target="_blank">POD03</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Himanshu Gupta</p></td>
<td class="text-center"><p><a href="https://cplt.pod4.aviatrixlab.com" target="_blank">POD04</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Zdenko Timulak</p></td>
<td class="text-center"><p><a href="https://cplt.pod5.aviatrixlab.com" target="_blank">POD05</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Chandra Thimmadasaiah</p></td>
<td class="text-center"><p><a href="https://cplt.pod6.aviatrixlab.com" target="_blank">POD06</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Muhammad Abdul Mujeeb</p></td>
<td class="text-center"><p><a href="https://cplt.pod7.aviatrixlab.com" target="_blank">POD07</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Tim Luz</p></td>
<td class="text-center"><p><a href="https://cplt.pod8.aviatrixlab.com" target="_blank">POD08</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Ygal Kemgne</p></td>
<td class="text-center"><p><a href="https://cplt.pod9.aviatrixlab.com" target="_blank">POD09</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Zahid Muhammad</p></td>
<td class="text-center"><p><a href="https://cplt.pod10.aviatrixlab.com" target="_blank">POD10</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Baris Ozay</p></td>
<td class="text-center"><p><a href="https://cplt.pod11.aviatrixlab.com" target="_blank">POD11</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Mushtaq Ahmed</p></td>
<td class="text-center"><p><a href="https://cplt.pod12.aviatrixlab.com" target="_blank">POD12</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Carlo Pio Luigi Ciciriello</p></td>
<td class="text-center"><p><a href="https://cplt.pod13.aviatrixlab.com" target="_blank">POD13</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>andrea proietti</p></td>
<td class="text-center"><p><a href="https://cplt.pod14.aviatrixlab.com" target="_blank">POD14</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Fabio Binetti</p></td>
<td class="text-center"><p><a href="https://cplt.pod15.aviatrixlab.com" target="_blank">POD15</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Tony Xu</p></td>
<td class="text-center"><p><a href="https://cplt.pod16.aviatrixlab.com" target="_blank">POD16</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Chen Shixian</p></td>
<td class="text-center"><p><a href="https://cplt.pod17.aviatrixlab.com" target="_blank">POD17</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Abhilasha Kumari</p></td>
<td class="text-center"><p><a href="https://cplt.pod18.aviatrixlab.com" target="_blank">POD18</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Heman Dinesh Vora</p></td>
<td class="text-center"><p><a href="https://cplt.pod19.aviatrixlab.com" target="_blank">POD19</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Adrián Huertas Ortega</p></td>
<td class="text-center"><p><a href="https://cplt.pod20.aviatrixlab.com" target="_blank">POD20</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Ed Baichtal</p></td>
<td class="text-center"><p><a href="https://cplt.pod21.aviatrixlab.com" target="_blank">POD22</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Navneet Verma</p></td>
<td class="text-center"><p><a href="https://cplt.pod22.aviatrixlab.com" target="_blank">POD22</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Simhadri Podala</p></td>
<td class="text-center"><p><a href="https://cplt.pod23.aviatrixlab.com" target="_blank">POD23</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Mayoro NIANG</p></td>
<td class="text-center"><p><a href="https://cplt.pod24.aviatrixlab.com" target="_blank">POD24</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Luca Lionetti</p></td>
<td class="text-center"><p><a href="https://cplt.pod25.aviatrixlab.com" target="_blank">POD25</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Rohit Chandna</p></td>
<td class="text-center"><p><a href="https://cplt.pod26.aviatrixlab.com" target="_blank">POD26</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Ravi Teja</p></td>
<td class="text-center"><p><a href="https://cplt.pod27.aviatrixlab.com" target="_blank">POD27</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Joana Manzano</p></td>
<td class="text-center"><p><a href="https://cplt.pod28.aviatrixlab.com" target="_blank">POD28</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="access-credentials">
<h2>Access credentials<a class="headerlink" href="#access-credentials" title="Link to this heading">#</a></h2>
<p>Username:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>student
</pre></div>
</div>
<p>Password:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>1116964Q!5FZLfG
</pre></div>
</div>
</section>
<section id="lab-pre-req">
<h2>LAB Pre-Req<a class="headerlink" href="#lab-pre-req" title="Link to this heading">#</a></h2>
<p>Before starting building your backbone infrastructure, change the following <strong>Fetch Timers</strong> to their lowest value.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Go to <strong>CoPilot &gt; Settings &gt; Resources &gt; Task Server</strong></p>
</div>
<p>Ensure <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">GW</span> <span class="pre">Routes</span></code> and <code class="docutils literal notranslate"><span class="pre">Fetch</span> <span class="pre">VPC</span> <span class="pre">Routes</span></code> intervals are set to <strong>“1 Second”</strong> each and then click on <strong>SAVE</strong>.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/backbone-tasks.png"><img alt="../_images/backbone-tasks.png" src="../_images/backbone-tasks.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Initial Topology</span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on the <strong>COMMIT</strong> button!</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>These are very aggressive settings. In a Production environment, you should not set these intervals that frequently!</p>
</div>
</section>
<section id="task-1-create-an-aws-tgw-using-the-copilot">
<h2>Task #1: Create an AWS TGW using the CoPilot<a class="headerlink" href="#task-1-create-an-aws-tgw-using-the-copilot" title="Link to this heading">#</a></h2>
<p>The Copilot provides an <code class="docutils literal notranslate"><span class="pre">AWS</span> <span class="pre">TGW</span> <span class="pre">(Transit</span> <span class="pre">Gateway)</span> <span class="pre">Network</span> <span class="pre">Orchestration</span></code> service, that allows to deploy the AWS TGW, avoiding to use the AWS Console.</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/backbone-tgw01.png"><img alt="../_images/backbone-tgw01.png" src="../_images/backbone-tgw01.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">AWS TGW - initial topology for task#1</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <strong>CoPilot &gt; Networking &gt; Connectivity &gt; AWS TGW</strong> and click on the <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">AWS</span> <span class="pre">TGW&quot;</span></code> button.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/backbone-tgw02.png"><img alt="../_images/backbone-tgw02.png" src="../_images/backbone-tgw02.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">AWS TGW section on the CoPilot</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">AWS</span> <span class="pre">TGW&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>AWS-NVirginia-TGW</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>AWS (Standard)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>aws-account </span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>us-east-1 (N. Virginia)</span></p></li>
<li><p><strong>AWS Side SAS Number:</strong> <span style='color:#479608'>64512</span></p></li>
</ul>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/backbone-tgw03.png"><img alt="../_images/backbone-tgw03.png" src="../_images/backbone-tgw03.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 5 </span><span class="caption-text">AWS TGW template</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on <strong>SAVE</strong>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It will take roughly <strong>2 minutes</strong> for the Aviatrix Controller to completing the deployment of the AWS TGW.</p>
</div>
<figure class="align-center" id="id6">
<img alt="../_images/backbone-tgw04.png" src="../_images/backbone-tgw04.png" />
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text">Final Deployment outcome</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="task-2-attach-vpc-to-aws-tgw">
<h2>Task #2: Attach VPC to AWS TGW<a class="headerlink" href="#task-2-attach-vpc-to-aws-tgw" title="Link to this heading">#</a></h2>
<p>Now that you have an AWS TGW, you need also to attach it to the existing <strong>spoke-vpc</strong>.</p>
<p>Click on the <code class="docutils literal notranslate"><span class="pre">AWS-NVirginia-TGW</span></code> element, select the <strong>VPC</strong> tab and then click on the <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">VPC&quot;</span></code> button.</p>
<figure class="align-center" id="id7">
<img alt="../_images/backbone-tgw05.png" src="../_images/backbone-tgw05.png" />
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">AWS NVirginia-TGW</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">VPC</span> <span class="pre">to</span> <span class="pre">AWS</span> <span class="pre">TGW&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>VPC:</strong> <span style='color:#479608'>spoke-aws</span></p></li>
<li><p><strong>Network Domain:</strong> <span style='color:#479608'>Default_Domain</span></p></li>
</ul>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../_images/backbone-tgw06.png"><img alt="../_images/backbone-tgw06.png" src="../_images/backbone-tgw06.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text">AWS NVirginia-TGW</span><a class="headerlink" href="#id8" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on <strong>SAVE</strong>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It will take roughly <strong>2 minutes</strong> for the Aviatrix Controller to completing the attachment.</p>
</div>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../_images/backbone-tgw07.png"><img alt="../_images/backbone-tgw07.png" src="../_images/backbone-tgw07.png" style="height: 350px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 9 </span><span class="caption-text">Attachment</span><a class="headerlink" href="#id9" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="task-3-create-an-aviatrix-transit-vpc">
<h2>Task #3: Create an Aviatrix Transit VPC<a class="headerlink" href="#task-3-create-an-aviatrix-transit-vpc" title="Link to this heading">#</a></h2>
<p>Let’s continue building up the cloud backbone, now you are asked to create a <code class="docutils literal notranslate"><span class="pre">Transit</span> <span class="pre">VPC</span></code>.</p>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="../_images/backbone-tgw08.png"><img alt="../_images/backbone-tgw08.png" src="../_images/backbone-tgw08.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 10 </span><span class="caption-text">Initial Topology for Task#3</span><a class="headerlink" href="#id10" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <strong>CoPilot &gt; Cloud Resources &gt; Cloud Assets &gt; VPC/VNets &amp; Subnets</strong> and click on the <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">VPC/VNet&quot;</span></code> button.</p>
<figure class="align-center" id="id11">
<img alt="../_images/backbone-tgw09.png" src="../_images/backbone-tgw09.png" />
<figcaption>
<p><span class="caption-number">Fig. 11 </span><span class="caption-text">Transit VPC</span><a class="headerlink" href="#id11" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">VPC/VNet&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>transit-aws</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>AWS (Standard)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>aws-account</span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>us-east-1 (N. Virginia)</span></p></li>
<li><p><strong>VPC CIDR:</strong> <span style='color:#479608'>10.10.0.0/16</span></p></li>
<li><p><strong>VPC Function:</strong> <span style='color:#479608'>Transit + FireNet</span></p></li>
</ul>
<figure class="align-center" id="id12">
<img alt="../_images/backbone-tgw010.png" src="../_images/backbone-tgw010.png" />
<figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text">VPC Template</span><a class="headerlink" href="#id12" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Wait few minutes for the completion of the task. Check the hourglass icon on the right-hand side of your Copilot.</p>
</div>
</section>
<section id="task-4-create-both-the-transit-gateways-and-the-peering">
<h2>Task #4: Create both the Transit Gateways and the peering<a class="headerlink" href="#task-4-create-both-the-transit-gateways-and-the-peering" title="Link to this heading">#</a></h2>
<p>Now it’s time to deploy a pair of <strong><code class="docutils literal notranslate"><span class="pre">Transit</span> <span class="pre">GWs</span></code></strong> inside the VPC created on the previous task. In addition to this, you have also to establish the <code class="docutils literal notranslate"><span class="pre">peering</span></code> between the Transit GWs in Azure and the Transit GWs in AWS.</p>
<figure class="align-center" id="id13">
<a class="reference internal image-reference" href="../_images/backbone-tgw011.png"><img alt="../_images/backbone-tgw011.png" src="../_images/backbone-tgw011.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text">Inital Topology for Task #4</span><a class="headerlink" href="#id13" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong> and click on the <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code> button.</p>
<figure class="align-center" id="id14">
<a class="reference internal image-reference" href="../_images/backbone-tgw12.png"><img alt="../_images/backbone-tgw12.png" src="../_images/backbone-tgw12.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 14 </span><span class="caption-text">Transit Gateways section</span><a class="headerlink" href="#id14" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Ensure these parameters are entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>Name:</strong> <span style='color:#479608'>transit-aws</span></p></li>
<li><p><strong>Cloud:</strong> <span style='color:#479608'>AWS (Standard)</span></p></li>
<li><p><strong>Account:</strong> <span style='color:#479608'>aws-account</span></p></li>
<li><p><strong>Region:</strong> <span style='color:#479608'>us-east-1 (N. Virginia)</span></p></li>
<li><p><strong>VPC/VNet:</strong> <span style='color:#479608'>transit-aws</span></p></li>
<li><p><strong>Instance Size:</strong> <span style='color:#479608'>c6in.large</span></p></li>
<li><p><strong>High Performance Encryption:</strong> <span style='color:#479608'><strong>ON</strong></span></p></li>
<li><p><strong>Peer To Transit Gateways:</strong> <span style='color:#479608'>transit-azure</span></p></li>
</ul>
<p>then click on the <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">Instance&quot;</span></code> button!</p>
<p><strong>Instance-1</strong>:</p>
<ul class="simple">
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>us-east-1a</span></p></li>
</ul>
<p><strong>Instance-2</strong>:</p>
<ul class="simple">
<li><p><strong>Attach to Subnet:</strong> <span style='color:#479608'>us-east-1b</span></p></li>
</ul>
<figure class="align-center" id="id15">
<img alt="../_images/backbone-tgw013.png" src="../_images/backbone-tgw013.png" />
<figcaption>
<p><span class="caption-number">Fig. 15 </span><span class="caption-text">Transit GW Template</span><a class="headerlink" href="#id15" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on <strong>SAVE</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Aviatrix Controller will deploy two Transit Gateways and, at the same time, it will establish the peering with the predeployed Transit Gateways in Azure.</p>
</div>
<p>You can monitor the progress of the task going to <strong>CoPilot &gt; Monitor &gt; Notifications &gt; Tasks</strong> and expanding the corresponding task, named <code class="docutils literal notranslate"><span class="pre">&quot;Create</span> <span class="pre">transit</span> <span class="pre">gateway:</span> <span class="pre">transit-aws&quot;</span></code>.</p>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="../_images/backbone-tgw014.png"><img alt="../_images/backbone-tgw014.png" src="../_images/backbone-tgw014.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 16 </span><span class="caption-text">Task in progress</span><a class="headerlink" href="#id16" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>it will take roughly <strong>10 minutes</strong> for the Aviatrix Controller for completing this task, therefore, be patient!</p>
</div>
<p>Now go to <strong>CoPilot &gt; Cloud Fabric &gt; Topology</strong>, click on the <code class="docutils literal notranslate"><span class="pre">&quot;Managed&quot;</span></code> button for hiding all the unmanaged VPCs (i.e. VPCs without an Aviatrix GW) and then click on the <code class="docutils literal notranslate"><span class="pre">&quot;Collapse</span> <span class="pre">all</span> <span class="pre">VPC/VNets&quot;</span></code> button.</p>
<figure class="align-center" id="id17">
<a class="reference internal image-reference" href="../_images/backbone-tgw015.png"><img alt="../_images/backbone-tgw015.png" src="../_images/backbone-tgw015.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 17 </span><span class="caption-text">Dynamic Topology</span><a class="headerlink" href="#id17" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You will notice the presence of the newly created <strong>peering</strong>.</p>
</section>
<section id="task-5-attach-transit-gateways-to-aws-tgw">
<h2>Task #5: Attach Transit Gateways to aws-tgw<a class="headerlink" href="#task-5-attach-transit-gateways-to-aws-tgw" title="Link to this heading">#</a></h2>
<p>Now let’s attach the Transit GWs in AWS to the AWS TGW.</p>
<figure class="align-center" id="id18">
<a class="reference internal image-reference" href="../_images/backbone-tgw016.png"><img alt="../_images/backbone-tgw016.png" src="../_images/backbone-tgw016.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 18 </span><span class="caption-text">Initial Topology for task #5</span><a class="headerlink" href="#id18" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <strong>CoPilot &gt; Networking &gt; Connectivity &gt; AWS TGW</strong> and click on the <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">Transit</span> <span class="pre">Gateway&quot;</span></code> button.</p>
<figure class="align-center" id="id19">
<img alt="../_images/backbone-tgw017.png" src="../_images/backbone-tgw017.png" />
<figcaption>
<p><span class="caption-number">Fig. 19 </span><span class="caption-text">“Attach Transit GW” button</span><a class="headerlink" href="#id19" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Ensure this parameter is entered in the pop-up window <code class="docutils literal notranslate"><span class="pre">&quot;Attach</span> <span class="pre">Transit</span> <span class="pre">Gateway</span> <span class="pre">to</span> <span class="pre">AWS-NVirginia-TGW&quot;</span></code>.</p>
<ul class="simple">
<li><p><strong>Transit Gateway:</strong> <span style='color:#479608'>transit-aws</span></p></li>
</ul>
<figure class="align-center" id="id20">
<img alt="../_images/backbone-tgw018.png" src="../_images/backbone-tgw018.png" />
<figcaption>
<p><span class="caption-number">Fig. 20 </span><span class="caption-text">Attachment Template</span><a class="headerlink" href="#id20" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Do not forget to click on <strong>SAVE</strong>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>it will take roughly <strong>3 minutes</strong> for the Aviatrix Controller for completing this task, therefore, be patient!</p>
</div>
</section>
<section id="task-6-configure-bgp-asn">
<h2>Task #6: Configure BGP ASN<a class="headerlink" href="#task-6-configure-bgp-asn" title="Link to this heading">#</a></h2>
<p>Now that you have established the peering between the two CSPs, you have achieved the <strong><code class="docutils literal notranslate"><span class="pre">Aviatrix</span> <span class="pre">Cloud</span> <span class="pre">Backbone</span></code></strong>.</p>
<p>Let’s carry on with the final deployment of the connectivity to the on-prem DC.</p>
<p>Before configuring the attachments between the Secure Edge Gateway and the Transit Gateways, you have to ensure that the Transit Gateways’s cluster earlier deployed in AWS is configured with a <strong><code class="docutils literal notranslate"><span class="pre">BGP</span> <span class="pre">AS</span> <span class="pre">number</span></code></strong>. <ins>This is a prerequisite for completing the Edge’s deployment</ins>!</p>
<p>Go to <strong>CoPilot &gt; Cloud Fabric &gt; Gateways &gt; Transit Gateways</strong> and click on the <strong>transit-aws</strong> cluster!</p>
<figure class="align-center" id="id21">
<a class="reference internal image-reference" href="../_images/backbone-tgw019.png"><img alt="../_images/backbone-tgw019.png" src="../_images/backbone-tgw019.png" style="height: 300px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 21 </span><span class="caption-text">transit-aws</span><a class="headerlink" href="#id21" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <code class="docutils literal notranslate"><span class="pre">&quot;Settings&quot;</span></code> tab and expand the <code class="docutils literal notranslate"><span class="pre">“Border</span> <span class="pre">Gateway</span> <span class="pre">Protocol</span> <span class="pre">(BGP)”</span></code> section and insert the AS number <strong>64582</strong> on the empty field related to the <code class="docutils literal notranslate"><span class="pre">&quot;“Local</span> <span class="pre">AS</span> <span class="pre">Number”</span></code>, then click on <strong>Save</strong>.</p>
<figure class="align-center" id="id22">
<img alt="../_images/backbone-tgw020.png" src="../_images/backbone-tgw020.png" />
<figcaption>
<p><span class="caption-number">Fig. 22 </span><span class="caption-text">BGP ASN</span><a class="headerlink" href="#id22" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>After this task, this is how the overall topology would look like.</p>
<figure class="align-center" id="id23">
<a class="reference internal image-reference" href="../_images/backbone-tgw021.png"><img alt="../_images/backbone-tgw021.png" src="../_images/backbone-tgw021.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 23 </span><span class="caption-text">Topology after task #6</span><a class="headerlink" href="#id23" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="task-7-edge-to-transits">
<h2>Task #7: Edge to Transits<a class="headerlink" href="#task-7-edge-to-transits" title="Link to this heading">#</a></h2>
<p>Let’s now attach the <strong>Secure Edge Gateway</strong> to the <strong>Transit Gateways</strong>.</p>
<figure class="align-center" id="id24">
<a class="reference internal image-reference" href="../_images/backbone-tgw022.png"><img alt="../_images/backbone-tgw022.png" src="../_images/backbone-tgw022.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 24 </span><span class="caption-text">The Hybrid Cloud through the Aviatrix Backbone</span><a class="headerlink" href="#id24" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Go to <strong>CoPilot &gt; Cloud Fabric &gt; Hybrid Cloud &gt; Edge Gateways</strong> and click on the <code class="docutils literal notranslate"><span class="pre">&quot;Manage</span> <span class="pre">Transit</span> <span class="pre">Gateway</span> <span class="pre">Attachment&quot;</span></code> button, on the right-hand side of the screen.</p>
<figure class="align-center" id="id25">
<a class="reference internal image-reference" href="../_images/backbone-tgw023.png"><img alt="../_images/backbone-tgw023.png" src="../_images/backbone-tgw023.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 25 </span><span class="caption-text">Manage Gateway Attachment</span><a class="headerlink" href="#id25" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Click on the <code class="docutils literal notranslate"><span class="pre">&quot;+Attachment&quot;</span></code> button.</p>
<figure class="align-center" id="id26">
<img alt="../_images/backbone-tgw024.png" src="../_images/backbone-tgw024.png" />
<figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text">+Attachment</span><a class="headerlink" href="#id26" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Fill in the attachment template using the following settings:</p>
<ul class="simple">
<li><p><strong>Transit Gateway</strong>: <span style='color:#479608'>transit-aws</span></p></li>
<li><p><strong>Local Edge Gateway Interfaces</strong>: <span style='color:#479608'>WAN(etho)</span></p></li>
<li><p><strong>Attach over</strong>: <span style='color:#479608'><strong>Public Network</strong></span></p></li>
<li><p><strong>High Performance Encryption</strong>: <span style='color:#479608'><strong>ON</strong></span></p></li>
<li><p><strong>Number of Tunnels</strong>: <span style='color:#479608'><strong>4</strong></span></p></li>
</ul>
<figure class="align-center" id="id27">
<img alt="../_images/backbone-tgw025.png" src="../_images/backbone-tgw025.png" />
<figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Template for aws</span><a class="headerlink" href="#id27" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Before saving the template, click on the <code class="docutils literal notranslate"><span class="pre">&quot;+</span> <span class="pre">Attachment&quot;</span></code> button and insert the following values in the second attachment template:</p>
<ul class="simple">
<li><p><strong>Transit Gateway</strong>: <span style='color:#479608'>azure-aws</span></p></li>
<li><p><strong>Local Edge Gateway Interfaces</strong>: <span style='color:#479608'>WAN(etho)</span></p></li>
<li><p><strong>Attach over</strong>: <span style='color:#479608'><strong>Public Network</strong></span></p></li>
<li><p><strong>High Performance Encryption</strong>: <span style='color:#479608'><strong>ON</strong></span></p></li>
<li><p><strong>Number of Tunnels</strong>: <span style='color:#479608'><strong>4</strong></span></p></li>
</ul>
<p>Now you can click on the <strong>SAVE</strong> button.</p>
<figure class="align-center" id="id28">
<img alt="../_images/backbone-tgw026.png" src="../_images/backbone-tgw026.png" />
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Template for azure</span><a class="headerlink" href="#id28" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now go to <strong>CoPilot &gt; Cloud Fabric &gt; Hybrid Cloud</strong> and click on the <strong>aviarix-edge-1</strong> instance.</p>
<figure class="align-center" id="id29">
<img alt="../_images/backbone-tgw027.png" src="../_images/backbone-tgw027.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">aviatrix-edge-1</span><a class="headerlink" href="#id29" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now search for the subnet <strong><code class="docutils literal notranslate"><span class="pre">10.1.2.0</span></code></strong> in AWS. You will notice the presence of 4x IPSec tunnels towards the First Transit Gateway, likewise other 4x IPSec tunnels towards the Second Transit Gateway.</p>
<figure class="align-center" id="id30">
<a class="reference internal image-reference" href="../_images/backbone-tgw028.png"><img alt="../_images/backbone-tgw028.png" src="../_images/backbone-tgw028.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">8x IPSec tunnels towards AWS</span><a class="headerlink" href="#id30" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now search for the subnet <strong><code class="docutils literal notranslate"><span class="pre">10.2.2.0</span></code></strong> in Azure. You will notice again 4x IPSec tunnels per each Transit Gateway!</p>
<figure class="align-center" id="id31">
<a class="reference internal image-reference" href="../_images/backbone-tgw029.png"><img alt="../_images/backbone-tgw029.png" src="../_images/backbone-tgw029.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">8x IPSec tunnels towards Azure</span><a class="headerlink" href="#id31" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You have successfully extended the Aviatrix solution to the on-prem Data Center, harnessing the <strong><code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Performance</span> <span class="pre">Encryption</span></code></strong> functionality.</p>
</section>
<section id="connectivity-test">
<h2>Connectivity Test<a class="headerlink" href="#connectivity-test" title="Link to this heading">#</a></h2>
<p>Let’s now verify the connectivity between Azuere, AWS and the on-prem DC.</p>
<p>Go to <strong>CoPilot &gt; Cloud Resources &gt; Cloud Assets</strong> and search for the <strong>aws-instance</strong> on the Search field, then retrieve its <strong>Public</strong> IP address!</p>
<figure class="align-center" id="id32">
<a class="reference internal image-reference" href="../_images/backbone-tgw030.png"><img alt="../_images/backbone-tgw030.png" src="../_images/backbone-tgw030.png" style="height: 250px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">aws-instance on the Cloud Assets</span><a class="headerlink" href="#id32" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now open an <strong>SSH client</strong> and establish a session towards the <ins>aws-instance</ins>.</p>
<figure class="align-center" id="id33">
<img alt="../_images/backbone-tgw031.png" src="../_images/backbone-tgw031.png" />
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">SSH</span><a class="headerlink" href="#id33" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Now let’s ping the <strong>Private</strong> IP address of the <ins>azure-instance</ins></p>
<figure class="align-center" id="id34">
<a class="reference internal image-reference" href="../_images/backbone-tgw032.png"><img alt="../_images/backbone-tgw032.png" src="../_images/backbone-tgw032.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">azure-instance</span><a class="headerlink" href="#id34" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Issue the following command to verify the connectivity towards the <strong><em>azure-instance</em></strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ping<span class="w"> </span><span class="m">10</span>.2.2.40<span class="w"> </span>
</pre></div>
</div>
<figure class="align-center" id="id35">
<a class="reference internal image-reference" href="../_images/backbone-tgw033.png"><img alt="../_images/backbone-tgw033.png" src="../_images/backbone-tgw033.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">ping towards azure-instance</span><a class="headerlink" href="#id35" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Stop the command and try to ping also the <strong>test-vm</strong> inside the on-prem DC.</p>
<figure class="align-center" id="id36">
<a class="reference internal image-reference" href="../_images/backbone-tgw034.png"><img alt="../_images/backbone-tgw034.png" src="../_images/backbone-tgw034.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">ping towards the test-vm inside the DC</span><a class="headerlink" href="#id36" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Issue the following command to verify the connectivity towards the <strong><em>test-vm</em></strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ping<span class="w"> </span><span class="m">10</span>.40.251.29
</pre></div>
</div>
<figure class="align-center" id="id37">
<a class="reference internal image-reference" href="../_images/backbone-tgw035.png"><img alt="../_images/backbone-tgw035.png" src="../_images/backbone-tgw035.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">ping towards the test-vm inside the DC</span><a class="headerlink" href="#id37" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>You have successfully verified the connectivity between the two CSPs and the on-prem DC by means of the Aviatrix Cloud Backbone.</p>
<p>Wait for 4-5 minutes and then go to <strong>CoPilot &gt; Monitor &gt; FlowIQ</strong> and on the <code class="docutils literal notranslate"><span class="pre">&quot;Filters&quot;</span></code> field click on the <strong>+</strong> button and create the following condition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Destination<span class="w"> </span>IP<span class="w"> </span>Address<span class="w"> </span>is<span class="w"> </span><span class="m">10</span>.2.2.40
</pre></div>
</div>
<figure class="align-center" id="id38">
<a class="reference internal image-reference" href="../_images/backbone-tgw036.png"><img alt="../_images/backbone-tgw036.png" src="../_images/backbone-tgw036.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">FlowIQ</span><a class="headerlink" href="#id38" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id39">
<a class="reference internal image-reference" href="../_images/backbone-tgw037.png"><img alt="../_images/backbone-tgw037.png" src="../_images/backbone-tgw037.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Condition</span><a class="headerlink" href="#id39" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">FlowIQ</span></code> provides a very interesting service that helps you gaining a very rich and deep visibility into your Traffic Flows.</p>
<p>For all network traffic moving across your Aviatrix-managed network, Aviatrix gateways capture <code class="docutils literal notranslate"><span class="pre">metadata</span></code> for all traffic traversing their links.</p>
</div>
<figure class="align-center" id="id40">
<a class="reference internal image-reference" href="../_images/backbone-tgw038.png"><img alt="../_images/backbone-tgw038.png" src="../_images/backbone-tgw038.png" style="height: 400px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">FlowIQ outcome</span><a class="headerlink" href="#id40" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>In this lab, you successfully designed and implemented a multi-cloud backbone architecture for ABC Healthcare, extending their cloud infrastructure across both Azure and AWS. Despite initial challenges, such as the lack of native connectivity between Azure Route Server and other cloud providers, you leveraged Aviatrix’s multicloud transit capabilities to create an efficient and robust solution. Through sequential tasks, you deployed key infrastructure components, including AWS Transit Gateway, Aviatrix Transit VPCs, and Aviatrix Transit Gateways. As a result, ABC Healthcare now possesses a <code class="docutils literal notranslate"><span class="pre">scalable</span> <span class="pre">and</span> <span class="pre">high-performance</span> <span class="pre">multi-cloud</span> <span class="pre">network</span> <span class="pre">backbone</span></code>, poised to support its growing cloud initiatives with enhanced inter-cloud and hybrid connectivity.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="home.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Welcome to ACE Cloud Backbone</p>
      </div>
    </a>
    <a class="right-next"
       href="Requirements.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Requirements</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">Scenario</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-objective">Lab Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-set-up">Initial Set-up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-access-details">LAB Access Details</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#access-credentials">Access credentials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-pre-req">LAB Pre-Req</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-1-create-an-aws-tgw-using-the-copilot">Task #1: Create an AWS TGW using the CoPilot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-2-attach-vpc-to-aws-tgw">Task #2: Attach VPC to AWS TGW</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-3-create-an-aviatrix-transit-vpc">Task #3: Create an Aviatrix Transit VPC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-4-create-both-the-transit-gateways-and-the-peering">Task #4: Create both the Transit Gateways and the peering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-5-attach-transit-gateways-to-aws-tgw">Task #5: Attach Transit Gateways to aws-tgw</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-6-configure-bgp-asn">Task #6: Configure BGP ASN</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#task-7-edge-to-transits">Task #7: Edge to Transits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-test">Connectivity Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aviatrix ACE
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>